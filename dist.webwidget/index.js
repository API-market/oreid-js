module.exports=(()=>{var e={695:(e,n,r)=>{"use strict";Object.defineProperty(n,"__esModule",{value:true});n.publicApiEndpoints=n.version=n.defaultOreIdServiceUrl=n.providersNotImplemented=void 0;var t=r(251);n.providersNotImplemented=["metro"];n.defaultOreIdServiceUrl="https://service.oreid.io";n.version="2.14.2";n.publicApiEndpoints=[t.ApiEndpoint.LoginUserWithToken]},251:(e,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:true});n.ApiEndpoint=n.RequestType=n.ExternalWalletInterface=n.AuthProvider=n.ExternalWalletType=n.OreIdProvider=n.RecoverAccountAction=n.AccountType=n.ChainNetwork=n.ChainPlatformType=n.Config=void 0;var r;(function(e){e["Chains"]="chains"})(r=n.Config||(n.Config={}));var t;(function(e){e["algorand"]="algorand";e["eos"]="eos";e["ethereum"]="ethereum";e["ore"]="ore"})(t=n.ChainPlatformType||(n.ChainPlatformType={}));var o;(function(e){e["AlgoMain"]="algo_main";e["AlgoBeta"]="algo_beta";e["AlgoTest"]="algo_test";e["EosMain"]="eos_main";e["EosKylin"]="eos_kylin";e["EosJugle"]="eos_jungle";e["EthMain"]="eth_main";e["EthRopsten"]="eth_ropsten";e["EthRinkeby"]="eth_rinkeby";e["OreMain"]="ore_main";e["OreTest"]="ore_test";e["DappKylin1"]="kylin-dsp-1.liquidapps.io";e["DappKylin2"]="kylin-dsp-2.liquidapps.io";e["TelosMain"]="telos_main";e["TelosTest"]="telos_test";e["WaxMain"]="wax_main";e["WaxTest"]="wax_test";e["UxMain"]="ux_main"})(o=n.ChainNetwork||(n.ChainNetwork={}));var i;(function(e){e["Native"]="native";e["Pending"]="pending";e["VirtualLiquid"]="liquid";e["VirtualNested"]="nested"})(i=n.AccountType||(n.AccountType={}));var a;(function(e){e["Republic"]="republic"})(a=n.RecoverAccountAction||(n.RecoverAccountAction={}));var u;(function(e){e["Custodial"]="custodial";e["Apple"]="apple";e["Email"]="email";e["Facebook"]="facebook";e["Github"]="github";e["Google"]="google";e["Instagram"]="instagram";e["Kakao"]="kakao";e["Line"]="line";e["LinkedIn"]="linkedin";e["Phone"]="phone";e["Twitch"]="twitch";e["Twitter"]="twitter"})(u=n.OreIdProvider||(n.OreIdProvider={}));var s;(function(e){e["AlgoSigner"]="algosigner";e["Keycat"]="keycat";e["Ledger"]="ledger";e["Lynx"]="lynx";e["Meetone"]="meetone";e["Metro"]="metro";e["Portis"]="portis";e["Scatter"]="scatter";e["SimpleEos"]="simpleos";e["TokenPocket"]="tokenpocket";e["WalletConnect"]="walletconnect";e["Web3"]="web3";e["WhaleVault"]="whalevault"})(s=n.ExternalWalletType||(n.ExternalWalletType={}));var c;(function(e){e["Custodial"]="custodial";e["Apple"]="apple";e["Email"]="email";e["Facebook"]="facebook";e["Github"]="github";e["Google"]="google";e["Instagram"]="instagram";e["Kakao"]="kakao";e["Line"]="line";e["LinkedIn"]="linkedin";e["Phone"]="phone";e["Twitch"]="twitch";e["Twitter"]="twitter";e["AlgoSigner"]="algosigner";e["Keycat"]="keycat";e["Ledger"]="ledger";e["Lynx"]="lynx";e["Meetone"]="meetone";e["Metro"]="metro";e["Portis"]="portis";e["Scatter"]="scatter";e["SimpleEos"]="simpleos";e["TokenPocket"]="tokenpocket";e["WalletConnect"]="walletconnect";e["Web3"]="web3";e["WhaleVault"]="whalevault";e["OreId"]="oreid"})(c=n.AuthProvider||(n.AuthProvider={}));var d;(function(e){e["Ual"]="ual";e["Transit"]="transit"})(d=n.ExternalWalletInterface||(n.ExternalWalletInterface={}));var f;(function(e){e["Get"]="get";e["Post"]="put"})(f=n.RequestType||(n.RequestType={}));var l;(function(e){e["AddPermission"]="account/add-permission";e["AppToken"]="app-token";e["CanAutoSign"]="transaction/can-auto-sign";e["ConvertOauthTokens"]="account/convert-oauth";e["CustodialMigrateAccount"]="custodial/migrate-account";e["CustodialNewAccount"]="custodial/new-user";e["CustodialSign"]="custodial/sign";e["LoginUserWithToken"]="account/login-user-with-token";e["PasswordLessSendCode"]="account/login-passwordless-send-code";e["PasswordLessVerifyCode"]="account/login-passwordless-verify-code";e["TransactionSign"]="transaction/sign";e["GetUser"]="account/user";e["GetConfig"]="services/config"})(l=n.ApiEndpoint||(n.ApiEndpoint={}))},535:(e,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:true});n.defaultWidth=n.defaultHeight=n.version=void 0;n.version="1.0.0";n.defaultHeight="740px";n.defaultWidth="420px"},912:(e,n,r)=>{"use strict";Object.defineProperty(n,"__esModule",{value:true});n.createWebWidget=void 0;var t=r(695);var o=r(535);var i=r(831);var a=r(831);Object.defineProperty(n,"DappAction",{enumerable:true,get:function(){return a.DappAction}});n.createWebWidget=function(){var e=r(271);var n=e.create({tag:"oreid-react-web-widget",url:function(e){var n;var r=e.props;var o=((n=r===null||r===void 0?void 0:r.oreIdOptions)===null||n===void 0?void 0:n.oreIdUrl)?r.oreIdOptions.oreIdUrl:t.defaultOreIdServiceUrl;return o+"/action"},dimensions:{width:o.defaultWidth,height:o.defaultHeight},props:{oreIdOptions:{type:i.WebWidgetPropType.Object},action:{type:i.WebWidgetPropType.Object},onSuccess:{type:i.WebWidgetPropType.Function},onError:{type:i.WebWidgetPropType.Function}},context:"iframe"});return n}},831:(e,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:true});n.WebWidgetPropType=n.DappAction=void 0;var r;(function(e){e["Auth"]="auth";e["NewAccount"]="newAccount";e["RecoverAccount"]="recoverAccount";e["Sign"]="sign";e["Logout"]="logout"})(r=n.DappAction||(n.DappAction={}));var t;(function(e){e["Object"]="object";e["String"]="string";e["Function"]="function"})(t=n.WebWidgetPropType||(n.WebWidgetPropType={}))},271:function(e){!function(n,r){true?e.exports=r():0}("undefined"!=typeof self?self:this,function(){return function(e){var n={};function __nested_webpack_require_403__(r){if(n[r])return n[r].exports;var t=n[r]={i:r,l:!1,exports:{}};e[r].call(t.exports,t,t.exports,__nested_webpack_require_403__);t.l=!0;return t.exports}__nested_webpack_require_403__.m=e;__nested_webpack_require_403__.c=n;__nested_webpack_require_403__.d=function(e,n,r){__nested_webpack_require_403__.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})};__nested_webpack_require_403__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});Object.defineProperty(e,"__esModule",{value:!0})};__nested_webpack_require_403__.t=function(e,n){1&n&&(e=__nested_webpack_require_403__(e));if(8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);__nested_webpack_require_403__.r(r);Object.defineProperty(r,"default",{enumerable:!0,value:e});if(2&n&&"string"!=typeof e)for(var t in e)__nested_webpack_require_403__.d(r,t,function(n){return e[n]}.bind(null,t));return r};__nested_webpack_require_403__.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};__nested_webpack_require_403__.d(n,"a",n);return n};__nested_webpack_require_403__.o=function(e,n){return{}.hasOwnProperty.call(e,n)};__nested_webpack_require_403__.p="";return __nested_webpack_require_403__(__nested_webpack_require_403__.s=0)}([function(e,n,r){"use strict";r.r(n);r.d(n,"PopupOpenError",function(){return m});r.d(n,"create",function(){return create});r.d(n,"destroy",function(){return component_destroy});r.d(n,"destroyComponents",function(){return destroyComponents});r.d(n,"destroyAll",function(){return J});r.d(n,"PROP_TYPE",function(){return M});r.d(n,"PROP_SERIALIZATION",function(){return I});r.d(n,"CONTEXT",function(){return N});r.d(n,"EVENT",function(){return j});function _setPrototypeOf(e,n){return(_setPrototypeOf=Object.setPrototypeOf||function(e,n){e.__proto__=n;return e})(e,n)}function _inheritsLoose(e,n){e.prototype=Object.create(n.prototype);e.prototype.constructor=e;_setPrototypeOf(e,n)}function _extends(){return(_extends=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)({}).hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e}).apply(this,arguments)}function utils_isPromise(e){try{if(!e)return!1;if("undefined"!=typeof Promise&&e instanceof Promise)return!0;if("undefined"!=typeof window&&"function"==typeof window.Window&&e instanceof window.Window)return!1;if("undefined"!=typeof window&&"function"==typeof window.constructor&&e instanceof window.constructor)return!1;var n={}.toString;if(n){var r=n.call(e);if("[object Window]"===r||"[object global]"===r||"[object DOMWindow]"===r)return!1}if("function"==typeof e.then)return!0}catch(e){return!1}return!1}var t=[];var o=[];var i=0;var a;function flushActive(){if(!i&&a){var e=a;a=null;e.resolve()}}function startActive(){i+=1}function endActive(){i-=1;flushActive()}var u=function(){function ZalgoPromise(e){var n=this;this.resolved=void 0;this.rejected=void 0;this.errorHandled=void 0;this.value=void 0;this.error=void 0;this.handlers=void 0;this.dispatching=void 0;this.stack=void 0;this.resolved=!1;this.rejected=!1;this.errorHandled=!1;this.handlers=[];if(e){var r;var t;var o=!1;var i=!1;var a=!1;startActive();try{e(function(e){if(a)n.resolve(e);else{o=!0;r=e}},function(e){if(a)n.reject(e);else{i=!0;t=e}})}catch(e){endActive();this.reject(e);return}endActive();a=!0;o?this.resolve(r):i&&this.reject(t)}}var e=ZalgoPromise.prototype;e.resolve=function(e){if(this.resolved||this.rejected)return this;if(utils_isPromise(e))throw new Error("Can not resolve promise with another promise");this.resolved=!0;this.value=e;this.dispatch();return this};e.reject=function(e){var n=this;if(this.resolved||this.rejected)return this;if(utils_isPromise(e))throw new Error("Can not reject promise with another promise");if(!e){var r=e&&"function"==typeof e.toString?e.toString():{}.toString.call(e);e=new Error("Expected reject to be called with Error, got "+r)}this.rejected=!0;this.error=e;this.errorHandled||setTimeout(function(){n.errorHandled||function(e,n){if(-1===t.indexOf(e)){t.push(e);setTimeout(function(){throw e},1);for(var r=0;r<o.length;r++)o[r](e,n)}}(e,n)},1);this.dispatch();return this};e.asyncReject=function(e){this.errorHandled=!0;this.reject(e);return this};e.dispatch=function(){var e=this.resolved,n=this.rejected,r=this.handlers;if(!this.dispatching&&(e||n)){this.dispatching=!0;startActive();var t=function(e,n){return e.then(function(e){n.resolve(e)},function(e){n.reject(e)})};for(var o=0;o<r.length;o++){var i=r[o],a=i.onSuccess,u=i.onError,s=i.promise;var c=void 0;if(e)try{c=a?a(this.value):this.value}catch(e){s.reject(e);continue}else if(n){if(!u){s.reject(this.error);continue}try{c=u(this.error)}catch(e){s.reject(e);continue}}if(c instanceof ZalgoPromise&&(c.resolved||c.rejected)){var d=c;d.resolved?s.resolve(d.value):s.reject(d.error);d.errorHandled=!0}else utils_isPromise(c)?c instanceof ZalgoPromise&&(c.resolved||c.rejected)?c.resolved?s.resolve(c.value):s.reject(c.error):t(c,s):s.resolve(c)}r.length=0;this.dispatching=!1;endActive()}};e.then=function(e,n){if(e&&"function"!=typeof e&&!e.call)throw new Error("Promise.then expected a function for success handler");if(n&&"function"!=typeof n&&!n.call)throw new Error("Promise.then expected a function for error handler");var r=new ZalgoPromise;this.handlers.push({promise:r,onSuccess:e,onError:n});this.errorHandled=!0;this.dispatch();return r};e.catch=function(e){return this.then(void 0,e)};e.finally=function(e){if(e&&"function"!=typeof e&&!e.call)throw new Error("Promise.finally expected a function");return this.then(function(n){return ZalgoPromise.try(e).then(function(){return n})},function(n){return ZalgoPromise.try(e).then(function(){throw n})})};e.timeout=function(e,n){var r=this;if(this.resolved||this.rejected)return this;var t=setTimeout(function(){r.resolved||r.rejected||r.reject(n||new Error("Promise timed out after "+e+"ms"))},e);return this.then(function(e){clearTimeout(t);return e})};e.toPromise=function(){if("undefined"==typeof Promise)throw new TypeError("Could not find Promise");return Promise.resolve(this)};ZalgoPromise.resolve=function(e){return e instanceof ZalgoPromise?e:utils_isPromise(e)?new ZalgoPromise(function(n,r){return e.then(n,r)}):(new ZalgoPromise).resolve(e)};ZalgoPromise.reject=function(e){return(new ZalgoPromise).reject(e)};ZalgoPromise.asyncReject=function(e){return(new ZalgoPromise).asyncReject(e)};ZalgoPromise.all=function(e){var n=new ZalgoPromise;var r=e.length;var t=[].slice();if(!r){n.resolve(t);return n}var o=function(e,o,i){return o.then(function(o){t[e]=o;0==(r-=1)&&n.resolve(t)},function(e){i.reject(e)})};for(var i=0;i<e.length;i++){var a=e[i];if(a instanceof ZalgoPromise){if(a.resolved){t[i]=a.value;r-=1;continue}}else if(!utils_isPromise(a)){t[i]=a;r-=1;continue}o(i,ZalgoPromise.resolve(a),n)}0===r&&n.resolve(t);return n};ZalgoPromise.hash=function(e){var n={};var r=[];var t=function(t){if(e.hasOwnProperty(t)){var o=e[t];utils_isPromise(o)?r.push(o.then(function(e){n[t]=e})):n[t]=o}};for(var o in e)t(o);return ZalgoPromise.all(r).then(function(){return n})};ZalgoPromise.map=function(e,n){return ZalgoPromise.all(e.map(n))};ZalgoPromise.onPossiblyUnhandledException=function(e){return function(e){o.push(e);return{cancel:function(){o.splice(o.indexOf(e),1)}}}(e)};ZalgoPromise.try=function(e,n,r){if(e&&"function"!=typeof e&&!e.call)throw new Error("Promise.try expected a function");var t;startActive();try{t=e.apply(n,r||[])}catch(e){endActive();return ZalgoPromise.reject(e)}endActive();return ZalgoPromise.resolve(t)};ZalgoPromise.delay=function(e){return new ZalgoPromise(function(n){setTimeout(n,e)})};ZalgoPromise.isPromise=function(e){return!!(e&&e instanceof ZalgoPromise)||utils_isPromise(e)};ZalgoPromise.flush=function(){return function(e){var n=a=a||new e;flushActive();return n}(ZalgoPromise)};return ZalgoPromise}();function isRegex(e){return"[object RegExp]"==={}.toString.call(e)}var s={IFRAME:"iframe",POPUP:"popup"};var c="Call was rejected by callee.\r\n";function isAboutProtocol(e){void 0===e&&(e=window);return"about:"===e.location.protocol}function utils_getParent(e){void 0===e&&(e=window);if(e)try{if(e.parent&&e.parent!==e)return e.parent}catch(e){}}function getOpener(e){void 0===e&&(e=window);if(e&&!utils_getParent(e))try{return e.opener}catch(e){}}function canReadFromWindow(e){try{return!0}catch(e){}return!1}function getActualDomain(e){void 0===e&&(e=window);var n=e.location;if(!n)throw new Error("Can not read window location");var r=n.protocol;if(!r)throw new Error("Can not read window protocol");if("file:"===r)return"file://";if("about:"===r){var t=utils_getParent(e);return t&&canReadFromWindow()?getActualDomain(t):"about://"}var o=n.host;if(!o)throw new Error("Can not read window host");return r+"//"+o}function getDomain(e){void 0===e&&(e=window);var n=getActualDomain(e);return n&&e.mockDomain&&0===e.mockDomain.indexOf("mock:")?e.mockDomain:n}function isSameDomain(e){if(!function(e){try{if(e===window)return!0}catch(e){}try{var n=Object.getOwnPropertyDescriptor(e,"location");if(n&&!1===n.enumerable)return!1}catch(e){}try{if(isAboutProtocol(e)&&canReadFromWindow())return!0}catch(e){}try{if(getActualDomain(e)===getActualDomain(window))return!0}catch(e){}return!1}(e))return!1;try{if(e===window)return!0;if(isAboutProtocol(e)&&canReadFromWindow())return!0;if(getDomain(window)===getDomain(e))return!0}catch(e){}return!1}function assertSameDomain(e){if(!isSameDomain(e))throw new Error("Expected window to be same domain");return e}function isAncestorParent(e,n){if(!e||!n)return!1;var r=utils_getParent(n);return r?r===e:-1!==function(e){var n=[];try{for(;e.parent!==e;){n.push(e.parent);e=e.parent}}catch(e){}return n}(n).indexOf(e)}function getFrames(e){var n=[];var r;try{r=e.frames}catch(n){r=e}var t;try{t=r.length}catch(e){}if(0===t)return n;if(t){for(var o=0;o<t;o++){var i=void 0;try{i=r[o]}catch(e){continue}n.push(i)}return n}for(var a=0;a<100;a++){var u=void 0;try{u=r[a]}catch(e){return n}if(!u)return n;n.push(u)}return n}function getAllChildFrames(e){var n=[];for(var r=0,t=getFrames(e);r<t.length;r++){var o=t[r];n.push(o);for(var i=0,a=getAllChildFrames(o);i<a.length;i++)n.push(a[i])}return n}function getTop(e){void 0===e&&(e=window);try{if(e.top)return e.top}catch(e){}if(utils_getParent(e)===e)return e;try{if(isAncestorParent(window,e)&&window.top)return window.top}catch(e){}try{if(isAncestorParent(e,window)&&window.top)return window.top}catch(e){}for(var n=0,r=getAllChildFrames(e);n<r.length;n++){var t=r[n];try{if(t.top)return t.top}catch(e){}if(utils_getParent(t)===t)return t}}function getAllFramesInWindow(e){var n=getTop(e);if(!n)throw new Error("Can not determine top window");var r=[].concat(getAllChildFrames(n),[n]);-1===r.indexOf(e)&&(r=[].concat(r,[e],getAllChildFrames(e)));return r}var d=[];var f=[];function isWindowClosed(e,n){void 0===n&&(n=!0);try{if(e===window)return!1}catch(e){return!0}try{if(!e)return!0}catch(e){return!0}try{if(e.closed)return!0}catch(e){return!e||e.message!==c}if(n&&isSameDomain(e))try{if(e.mockclosed)return!0}catch(e){}try{if(!e.parent||!e.top)return!0}catch(e){}var r=function(e,n){for(var r=0;r<e.length;r++)try{if(e[r]===n)return r}catch(e){}return-1}(d,e);if(-1!==r){var t=f[r];if(t&&function(e){if(!e.contentWindow)return!0;if(!e.parentNode)return!0;var n=e.ownerDocument;if(n&&n.documentElement&&!n.documentElement.contains(e)){var r=e;for(;r.parentNode&&r.parentNode!==r;)r=r.parentNode;if(!r.host||!n.documentElement.contains(r.host))return!0}return!1}(t))return!0}return!1}function utils_getUserAgent(e){return(e=e||window).navigator.mockUserAgent||e.navigator.userAgent}function getFrameByName(e,n){var r=getFrames(e);for(var t=0;t<r.length;t++){var o=r[t];try{if(isSameDomain(o)&&o.name===n&&-1!==r.indexOf(o))return o}catch(e){}}try{if(-1!==r.indexOf(e.frames[n]))return e.frames[n]}catch(e){}try{if(-1!==r.indexOf(e[n]))return e[n]}catch(e){}}function isOpener(e,n){return e===getOpener(n)}function getAncestor(e){void 0===e&&(e=window);return getOpener(e=e||window)||utils_getParent(e)||void 0}function anyMatch(e,n){for(var r=0;r<e.length;r++){var t=e[r];for(var o=0;o<n.length;o++)if(t===n[o])return!0}return!1}function getDistanceFromTop(e){void 0===e&&(e=window);var n=0;var r=e;for(;r;)(r=utils_getParent(r))&&(n+=1);return n}function isSameTopWindow(e,n){var r=getTop(e)||e;var t=getTop(n)||n;try{if(r&&t)return r===t}catch(e){}var o=getAllFramesInWindow(e);var i=getAllFramesInWindow(n);if(anyMatch(o,i))return!0;var a=getOpener(r);var u=getOpener(t);return a&&anyMatch(getAllFramesInWindow(a),i)||u&&anyMatch(getAllFramesInWindow(u),o),!1}function matchDomain(e,n){if("string"==typeof e){if("string"==typeof n)return"*"===e||n===e;if(isRegex(n))return!1;if(Array.isArray(n))return!1}return isRegex(e)?isRegex(n)?e.toString()===n.toString():!Array.isArray(n)&&Boolean(n.match(e)):!!Array.isArray(e)&&(Array.isArray(n)?JSON.stringify(e)===JSON.stringify(n):!isRegex(n)&&e.some(function(e){return matchDomain(e,n)}))}function getDomainFromUrl(e){return e.match(/^(https?|mock|file):\/\//)?e.split("/").slice(0,3).join("/"):getDomain()}function onCloseWindow(e,n,r,t){void 0===r&&(r=1e3);void 0===t&&(t=1/0);var o;!function check(){if(isWindowClosed(e)){o&&clearTimeout(o);return n()}if(t<=0)clearTimeout(o);else{t-=r;o=setTimeout(check,r)}}();return{cancel:function(){o&&clearTimeout(o)}}}function isWindow(e){try{if(e===window)return!0}catch(e){if(e&&e.message===c)return!0}try{if("[object Window]"==={}.toString.call(e))return!0}catch(e){if(e&&e.message===c)return!0}try{if(window.Window&&e instanceof window.Window)return!0}catch(e){if(e&&e.message===c)return!0}try{if(e&&e.self===e)return!0}catch(e){if(e&&e.message===c)return!0}try{if(e&&e.parent===e)return!0}catch(e){if(e&&e.message===c)return!0}try{if(e&&e.top===e)return!0}catch(e){if(e&&e.message===c)return!0}try{if(e&&"__unlikely_value__"===e.__cross_domain_utils_window_check__)return!1}catch(e){return!0}try{if("postMessage"in e&&"self"in e&&"location"in e)return!0}catch(e){}return!1}function normalizeMockUrl(e){if(!(n=getDomainFromUrl(e),0===n.indexOf("mock:")))return e;var n;throw new Error("Mock urls not supported out of test mode")}function closeWindow(e){try{e.close()}catch(e){}}function util_safeIndexOf(e,n){for(var r=0;r<e.length;r++)try{if(e[r]===n)return r}catch(e){}return-1}var l=function(){function CrossDomainSafeWeakMap(){this.name=void 0;this.weakmap=void 0;this.keys=void 0;this.values=void 0;this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__";if(function(){if("undefined"==typeof WeakMap)return!1;if(void 0===Object.freeze)return!1;try{var e=new WeakMap;var n={};Object.freeze(n);e.set(n,"__testvalue__");return"__testvalue__"===e.get(n)}catch(e){return!1}}())try{this.weakmap=new WeakMap}catch(e){}this.keys=[];this.values=[]}var e=CrossDomainSafeWeakMap.prototype;e._cleanupClosedWindows=function(){var e=this.weakmap;var n=this.keys;for(var r=0;r<n.length;r++){var t=n[r];if(isWindow(t)&&isWindowClosed(t)){if(e)try{e.delete(t)}catch(e){}n.splice(r,1);this.values.splice(r,1);r-=1}}};e.isSafeToReadWrite=function(e){return!isWindow(e)};e.set=function(e,n){if(!e)throw new Error("WeakMap expected key");var r=this.weakmap;if(r)try{r.set(e,n)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e))try{var t=this.name;var o=e[t];o&&o[0]===e?o[1]=n:Object.defineProperty(e,t,{value:[e,n],writable:!0});return}catch(e){}this._cleanupClosedWindows();var i=this.keys;var a=this.values;var u=util_safeIndexOf(i,e);if(-1===u){i.push(e);a.push(n)}else a[u]=n};e.get=function(e){if(!e)throw new Error("WeakMap expected key");var n=this.weakmap;if(n)try{if(n.has(e))return n.get(e)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e))try{var r=e[this.name];return r&&r[0]===e?r[1]:void 0}catch(e){}this._cleanupClosedWindows();var t=util_safeIndexOf(this.keys,e);if(-1!==t)return this.values[t]};e.delete=function(e){if(!e)throw new Error("WeakMap expected key");var n=this.weakmap;if(n)try{n.delete(e)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e))try{var r=e[this.name];r&&r[0]===e&&(r[0]=r[1]=void 0)}catch(e){}this._cleanupClosedWindows();var t=this.keys;var o=util_safeIndexOf(t,e);if(-1!==o){t.splice(o,1);this.values.splice(o,1)}};e.has=function(e){if(!e)throw new Error("WeakMap expected key");var n=this.weakmap;if(n)try{if(n.has(e))return!0}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e))try{var r=e[this.name];return!(!r||r[0]!==e)}catch(e){}this._cleanupClosedWindows();return-1!==util_safeIndexOf(this.keys,e)};e.getOrSet=function(e,n){if(this.has(e))return this.get(e);var r=n();this.set(e,r);return r};return CrossDomainSafeWeakMap}();function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return!0}catch(e){return!1}}function construct_construct(e,n,r){return(construct_construct=_isNativeReflectConstruct()?Reflect.construct:function(e,n,r){var t=[null];t.push.apply(t,n);var o=new(Function.bind.apply(e,t));r&&_setPrototypeOf(o,r.prototype);return o}).apply(null,arguments)}function wrapNativeSuper_wrapNativeSuper(e){var n="function"==typeof Map?new Map:void 0;return(wrapNativeSuper_wrapNativeSuper=function(e){if(null===e||!(r=e,-1!==Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,Wrapper)}function Wrapper(){return construct_construct(e,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(e.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}});return _setPrototypeOf(Wrapper,e)})(e)}function getFunctionName(e){return e.name||e.__name__||e.displayName||"anonymous"}function setFunctionName(e,n){try{delete e.name;e.name=n}catch(e){}e.__name__=e.displayName=n;return e}function base64encode(e){if("function"==typeof btoa)return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,n){return String.fromCharCode(parseInt(n,16))})).replace(/[=]/g,"");if("undefined"!=typeof Buffer)return Buffer.from(e,"utf8").toString("base64").replace(/[=]/g,"");throw new Error("Can not find window.btoa or Buffer")}function uniqueID(){var e="0123456789abcdef";return"uid_"+"xxxxxxxxxx".replace(/./g,function(){return e.charAt(Math.floor(Math.random()*e.length))})+"_"+base64encode((new Date).toISOString().slice(11,19).replace("T",".")).replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}var w;function serializeArgs(e){try{return JSON.stringify([].slice.call(e),function(e,n){return"function"==typeof n?"memoize["+function(e){w=w||new l;if(null==e||"object"!=typeof e&&"function"!=typeof e)throw new Error("Invalid object");var n=w.get(e);if(!n){n=typeof e+":"+uniqueID();w.set(e,n)}return n}(n)+"]":n})}catch(e){throw new Error("Arguments not serializable -- can not be used to memoize")}}function getEmptyObject(){return{}}var p=0;var h=0;function memoize(e,n){void 0===n&&(n={});var r=n.thisNamespace,t=void 0!==r&&r,o=n.time;var i;var a;var u=p;p+=1;var s=function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];if(u<h){i=null;a=null;u=p;p+=1}var c;c=t?(a=a||new l).getOrSet(this,getEmptyObject):i=i||{};var d=serializeArgs(r);var f=c[d];if(f&&o&&Date.now()-f.time<o){delete c[d];f=null}if(f)return f.value;var w=Date.now();var v=e.apply(this,arguments);c[d]={time:w,value:v};return v};s.reset=function(){i=null;a=null};return setFunctionName(s,(n.name||getFunctionName(e))+"::memoized")}memoize.clear=function(){h=p};function memoizePromise(e){var n={};function memoizedPromiseFunction(){var r=arguments,t=this;for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];var s=serializeArgs(i);if(n.hasOwnProperty(s))return n[s];n[s]=u.try(function(){return e.apply(t,r)}).finally(function(){delete n[s]});return n[s]}memoizedPromiseFunction.reset=function(){n={}};return setFunctionName(memoizedPromiseFunction,getFunctionName(e)+"::promiseMemoized")}function inlineMemoize(e,n,r){void 0===r&&(r=[]);var t=e.__inline_memoize_cache__=e.__inline_memoize_cache__||{};var o=serializeArgs(r);return t.hasOwnProperty(o)?t[o]:t[o]=n.apply(void 0,r)}function src_util_noop(){}function once(e){var n=!1;return setFunctionName(function(){if(!n){n=!0;return e.apply(this,arguments)}},getFunctionName(e)+"::once")}function stringifyError(e,n){void 0===n&&(n=1);if(n>=3)return"stringifyError stack overflow";try{if(!e)return"<unknown error: "+{}.toString.call(e)+">";if("string"==typeof e)return e;if(e instanceof Error){var r=e&&e.stack;var t=e&&e.message;if(r&&t)return-1!==r.indexOf(t)?r:t+"\n"+r;if(r)return r;if(t)return t}return e&&e.toString&&"function"==typeof e.toString?e.toString():{}.toString.call(e)}catch(e){return"Error while stringifying error: "+stringifyError(e,n+1)}}function stringify(e){return"string"==typeof e?e:e&&e.toString&&"function"==typeof e.toString?e.toString():{}.toString.call(e)}function extend(e,n){if(!n)return e;if(Object.assign)return Object.assign(e,n);for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);return e}memoize(function(e){if(Object.values)return Object.values(e);var n=[];for(var r in e)e.hasOwnProperty(r)&&n.push(e[r]);return n});function identity(e){return e}function safeInterval(e,n){var r;!function loop(){r=setTimeout(function(){e();loop()},n)}();return{cancel:function(){clearTimeout(r)}}}function dasherizeToCamel(e){return e.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})}function defineLazyProp(e,n,r){if(Array.isArray(e)){if("number"!=typeof n)throw new TypeError("Array key must be number")}else if("object"==typeof e&&null!==e&&"string"!=typeof n)throw new TypeError("Object key must be string");Object.defineProperty(e,n,{configurable:!0,enumerable:!0,get:function(){delete e[n];var t=r();e[n]=t;return t},set:function(r){delete e[n];e[n]=r}})}function arrayFrom(e){return[].slice.call(e)}function isObjectObject(e){return"object"==typeof(n=e)&&null!==n&&"[object Object]"==={}.toString.call(e);var n}function isPlainObject(e){if(!isObjectObject(e))return!1;var n=e.constructor;if("function"!=typeof n)return!1;var r=n.prototype;return!!isObjectObject(r)&&!!r.hasOwnProperty("isPrototypeOf")}function replaceObject(e,n,r){void 0===r&&(r="");if(Array.isArray(e)){var t=e.length;var o=[];var i=function(t){defineLazyProp(o,t,function(){var o=r?r+"."+t:""+t;var i=n(e[t],t,o);(isPlainObject(i)||Array.isArray(i))&&(i=replaceObject(i,n,o));return i})};for(var a=0;a<t;a++)i(a);return o}if(isPlainObject(e)){var u={};var s=function(t){if(!e.hasOwnProperty(t))return"continue";defineLazyProp(u,t,function(){var o=r?r+"."+t:""+t;var i=n(e[t],t,o);(isPlainObject(i)||Array.isArray(i))&&(i=replaceObject(i,n,o));return i})};for(var c in e)s(c);return u}throw new Error("Pass an object or array")}function isDefined(e){return null!=e}function util_isRegex(e){return"[object RegExp]"==={}.toString.call(e)}function util_getOrSet(e,n,r){if(e.hasOwnProperty(n))return e[n];var t=r();e[n]=t;return t}function cleanup(e){var n=[];var r=!1;var t;var o={set:function(n,t){if(!r){e[n]=t;o.register(function(){delete e[n]})}return t},register:function(e){r?e(t):n.push(once(function(){return e(t)}))},all:function(e){t=e;var o=[];r=!0;for(;n.length;){var i=n.shift();o.push(i())}return u.all(o).then(src_util_noop)}};return o}function assertExists(e,n){if(null==n)throw new Error("Expected "+e+" to be present");return n}var v=function(e){_inheritsLoose(ExtendableError,e);function ExtendableError(n){var r;(r=e.call(this,n)||this).name=r.constructor.name;"function"==typeof Error.captureStackTrace?Error.captureStackTrace(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r),r.constructor):r.stack=new Error(n).stack;return r}return ExtendableError}(wrapNativeSuper_wrapNativeSuper(Error));function getBody(){var e=document.body;if(!e)throw new Error("Body element not found");return e}function isDocumentReady(){return Boolean(document.body)&&"complete"===document.readyState}function isDocumentInteractive(){return Boolean(document.body)&&"interactive"===document.readyState}function urlEncode(e){return encodeURIComponent(e)}memoize(function(){return new u(function(e){if(isDocumentReady()||isDocumentInteractive())return e();var n=setInterval(function(){if(isDocumentReady()||isDocumentInteractive()){clearInterval(n);return e()}},10)})});function parseQuery(e){return inlineMemoize(parseQuery,function(){var n={};if(!e)return n;if(-1===e.indexOf("="))return n;for(var r=0,t=e.split("&");r<t.length;r++){var o=t[r];(o=o.split("="))[0]&&o[1]&&(n[decodeURIComponent(o[0])]=decodeURIComponent(o[1]))}return n},[e])}function extendQuery(e,n){void 0===n&&(n={});return n&&Object.keys(n).length?function(e){void 0===e&&(e={});return Object.keys(e).filter(function(n){return"string"==typeof e[n]||"boolean"==typeof e[n]}).map(function(n){var r=e[n];if("string"!=typeof r&&"boolean"!=typeof r)throw new TypeError("Invalid type for query");return urlEncode(n)+"="+urlEncode(r.toString())}).join("&")}(_extends({},parseQuery(e),n)):e}function appendChild(e,n){e.appendChild(n)}function isElement(e){return e instanceof window.Element||null!==e&&"object"==typeof e&&1===e.nodeType&&"object"==typeof e.style&&"object"==typeof e.ownerDocument}function getElementSafe(e,n){void 0===n&&(n=document);return isElement(e)?e:"string"==typeof e?n.querySelector(e):void 0}function elementReady(e){return new u(function(n,r){var t=stringify(e);var o=getElementSafe(e);if(o)return n(o);if(isDocumentReady())return r(new Error("Document is ready and element "+t+" does not exist"));var i=setInterval(function(){if(o=getElementSafe(e)){n(o);clearInterval(i)}else if(isDocumentReady()){clearInterval(i);return r(new Error("Document is ready and element "+t+" does not exist"))}},10)})}var m=function(e){_inheritsLoose(PopupOpenError,e);function PopupOpenError(){return e.apply(this,arguments)||this}return PopupOpenError}(v);var g;function awaitFrameLoad(e){if((g=g||new l).has(e)){var n=g.get(e);if(n)return n}var r=new u(function(n,r){e.addEventListener("load",function(){!function(e){!function(){for(var e=0;e<d.length;e++){var n=!1;try{n=d[e].closed}catch(e){}if(n){f.splice(e,1);d.splice(e,1)}}}();if(e&&e.contentWindow)try{d.push(e.contentWindow);f.push(e)}catch(e){}}(e);n(e)});e.addEventListener("error",function(t){e.contentWindow?n(e):r(t)})});g.set(e,r);return r}function awaitFrameWindow(e){return awaitFrameLoad(e).then(function(e){if(!e.contentWindow)throw new Error("Could not find window in iframe");return e.contentWindow})}function dom_iframe(e,n){void 0===e&&(e={});var r=e.style||{};var t=function(e,n,r){void 0===e&&(e="div");void 0===n&&(n={});e=e.toLowerCase();var t=document.createElement(e);n.style&&extend(t.style,n.style);n.class&&(t.className=n.class.join(" "));n.id&&t.setAttribute("id",n.id);if(n.attributes)for(var o=0,i=Object.keys(n.attributes);o<i.length;o++){var a=i[o];t.setAttribute(a,n.attributes[a])}n.styleSheet&&function(e,n,r){void 0===r&&(r=window.document);e.styleSheet?e.styleSheet.cssText=n:e.appendChild(r.createTextNode(n))}(t,n.styleSheet);if(n.html){if("iframe"===e)throw new Error("Iframe html can not be written unless container provided and iframe in DOM");t.innerHTML=n.html}return t}("iframe",{attributes:_extends({allowTransparency:"true"},e.attributes||{}),style:_extends({backgroundColor:"transparent",border:"none"},r),html:e.html,class:e.class});var o=window.navigator.userAgent.match(/MSIE|Edge/i);t.hasAttribute("id")||t.setAttribute("id",uniqueID());awaitFrameLoad(t);n&&function(e,n){void 0===n&&(n=document);var r=getElementSafe(e,n);if(r)return r;throw new Error("Can not find element: "+stringify(e))}(n).appendChild(t);(e.url||o)&&t.setAttribute("src",e.url||"about:blank");return t}function addEventListener(e,n,r){e.addEventListener(n,r);return{cancel:function(){e.removeEventListener(n,r)}}}function showElement(e){e.style.setProperty("display","")}function hideElement(e){e.style.setProperty("display","none","important")}function destroyElement(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function isElementClosed(e){return!(e&&e.parentNode&&e.ownerDocument&&e.ownerDocument.documentElement&&e.ownerDocument.documentElement.contains(e))}function onResize(e,n,r){var t=void 0===r?{}:r,o=t.width,i=void 0===o||o,a=t.height,u=void 0===a||a,s=t.interval,c=void 0===s?100:s,d=t.win,f=void 0===d?window:d;var l=e.offsetWidth;var w=e.offsetHeight;var p=!1;n({width:l,height:w});var h=function(){if(!p&&function(e){return Boolean(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}(e)){var r=e.offsetWidth;var t=e.offsetHeight;(i&&r!==l||u&&t!==w)&&n({width:r,height:t});l=r;w=t}};var v;var m;f.addEventListener("resize",h);if(void 0!==f.ResizeObserver){(v=new f.ResizeObserver(h)).observe(e);m=safeInterval(h,10*c)}else if(void 0!==f.MutationObserver){(v=new f.MutationObserver(h)).observe(e,{attributes:!0,childList:!0,subtree:!0,characterData:!1});m=safeInterval(h,10*c)}else m=safeInterval(h,c);return{cancel:function(){p=!0;v.disconnect();window.removeEventListener("resize",h);m.cancel()}}}function isShadowElement(e){for(;e.parentNode;)e=e.parentNode;return"[object ShadowRoot]"===e.toString()}var y="undefined"!=typeof document?document.currentScript:null;var _=memoize(function(){if(y)return y;if(y=function(){try{var e=function(){try{throw new Error("_")}catch(e){return e.stack||""}}();var n=/.*at [^(]*\((.*):(.+):(.+)\)$/gi.exec(e);var r=n&&n[1];if(!r)return;for(var t=0,o=[].slice.call(document.getElementsByTagName("script")).reverse();t<o.length;t++){var i=o[t];if(i.src&&i.src===r)return i}}catch(e){}}())return y;throw new Error("Can not determine current script")});var b=uniqueID();memoize(function(){var e;try{e=_()}catch(e){return b}var n=e.getAttribute("data-uid");if(n&&"string"==typeof n)return n;if((n=e.getAttribute("data-uid-auto"))&&"string"==typeof n)return n;if(e.src){var r=function(e){var n="";for(var r=0;r<e.length;r++){var t=e[r].charCodeAt(0)*r;e[r+1]&&(t+=e[r+1].charCodeAt(0)*(r-1));n+=String.fromCharCode(97+Math.abs(t)%26)}return n}(JSON.stringify({src:e.src,dataset:e.dataset}));n="uid_"+r.slice(r.length-30)}else n=uniqueID();e.setAttribute("data-uid-auto",n);return n});function isPerc(e){return"string"==typeof e&&/^[0-9]+%$/.test(e)}function toNum(e){if("number"==typeof e)return e;var n=e.match(/^([0-9]+)(px|%)$/);if(!n)throw new Error("Could not match css value from "+e);return parseInt(n[1],10)}function toPx(e){return toNum(e)+"px"}function toCSS(e){return"number"==typeof e?toPx(e):isPerc(e)?e:toPx(e)}function normalizeDimension(e,n){if("number"==typeof e)return e;if(isPerc(e))return parseInt(n*toNum(e)/100,10);if("string"==typeof(r=e)&&/^[0-9]+px$/.test(r))return toNum(e);var r;throw new Error("Can not normalize dimension: "+e)}function global_getGlobal(e){void 0===e&&(e=window);var n="__post_robot_10_0_44__";return e!==window?e[n]:e[n]=e[n]||{}}var E=function(){return{}};function globalStore(e,n){void 0===e&&(e="store");void 0===n&&(n=E);return util_getOrSet(global_getGlobal(),e,function(){var e=n();return{has:function(n){return e.hasOwnProperty(n)},get:function(n,r){return e.hasOwnProperty(n)?e[n]:r},set:function(n,r){e[n]=r;return r},del:function(n){delete e[n]},getOrSet:function(n,r){return util_getOrSet(e,n,r)},reset:function(){e=n()},keys:function(){return Object.keys(e)}}})}var P=function(){};function getWildcard(){var e=global_getGlobal();e.WINDOW_WILDCARD=e.WINDOW_WILDCARD||new P;return e.WINDOW_WILDCARD}function windowStore(e,n){void 0===e&&(e="store");void 0===n&&(n=E);return globalStore("windowStore").getOrSet(e,function(){var r=new l;var t=function(e){return r.getOrSet(e,n)};return{has:function(n){return t(n).hasOwnProperty(e)},get:function(n,r){var o=t(n);return o.hasOwnProperty(e)?o[e]:r},set:function(n,r){t(n)[e]=r;return r},del:function(n){delete t(n)[e]},getOrSet:function(n,r){return util_getOrSet(t(n),e,r)}}})}function getInstanceID(){return globalStore("instance").getOrSet("instanceID",uniqueID)}function resolveHelloPromise(e,n){var r=n.domain;var t=windowStore("helloPromises");var o=t.get(e);o&&o.resolve({domain:r});var i=u.resolve({domain:r});t.set(e,i);return i}function sayHello(e,n){return(0,n.send)(e,"postrobot_hello",{instanceID:getInstanceID()},{domain:"*",timeout:-1}).then(function(n){var r=n.origin,t=n.data.instanceID;resolveHelloPromise(e,{domain:r});return{win:e,domain:r,instanceID:t}})}function getWindowInstanceID(e,n){var r=n.send;return windowStore("windowInstanceIDPromises").getOrSet(e,function(){return sayHello(e,{send:r}).then(function(e){return e.instanceID})})}function awaitWindowHello(e,n,r){void 0===n&&(n=5e3);void 0===r&&(r="Window");var t=function(e){return windowStore("helloPromises").getOrSet(e,function(){return new u})}(e);-1!==n&&(t=t.timeout(n,new Error(r+" did not load after "+n+"ms")));return t}function markWindowKnown(e){windowStore("knownWindows").set(e,!0)}function isSerializedType(e){return"object"==typeof e&&null!==e&&"string"==typeof e.__type__}function determineType(e){return void 0===e?"undefined":null===e?"null":Array.isArray(e)?"array":"function"==typeof e?"function":"object"==typeof e?e instanceof Error?"error":"function"==typeof e.then?"promise":"[object RegExp]"==={}.toString.call(e)?"regex":"[object Date]"==={}.toString.call(e)?"date":"object":"string"==typeof e?"string":"number"==typeof e?"number":"boolean"==typeof e?"boolean":void 0}function serializeType(e,n){return{__type__:e,__val__:n}}var W;var x=((W={}).function=function(){},W.error=function(e){return serializeType("error",{message:e.message,stack:e.stack,code:e.code,data:e.data})},W.promise=function(){},W.regex=function(e){return serializeType("regex",e.source)},W.date=function(e){return serializeType("date",e.toJSON())},W.array=function(e){return e},W.object=function(e){return e},W.string=function(e){return e},W.number=function(e){return e},W.boolean=function(e){return e},W.null=function(e){return e},W[void 0]=function(e){return serializeType("undefined",e)},W);var S={};var D;var C=((D={}).function=function(){throw new Error("Function serialization is not implemented; nothing to deserialize")},D.error=function(e){var n=e.stack,r=e.code,t=e.data;var o=new Error(e.message);o.code=r;t&&(o.data=t);o.stack=n+"\n\n"+o.stack;return o},D.promise=function(){throw new Error("Promise serialization is not implemented; nothing to deserialize")},D.regex=function(e){return new RegExp(e)},D.date=function(e){return new Date(e)},D.array=function(e){return e},D.object=function(e){return e},D.string=function(e){return e},D.number=function(e){return e},D.boolean=function(e){return e},D.null=function(e){return e},D[void 0]=function(){},D);var A={};function needsBridgeForBrowser(){return!!utils_getUserAgent(window).match(/MSIE|trident|edge\/12|edge\/13/i)}function needsBridgeForWin(e){return!isSameTopWindow(window,e)}function needsBridgeForDomain(e,n){if(e){if(getDomain()!==getDomainFromUrl(e))return!0}else if(n&&!isSameDomain(n))return!0;return!1}function needsBridge(e){var n=e.win,r=e.domain;return!(!needsBridgeForBrowser()||r&&!needsBridgeForDomain(r,n)||n&&!needsBridgeForWin(n))}function getBridgeName(e){return"__postrobot_bridge___"+(e=e||getDomainFromUrl(e)).replace(/[^a-zA-Z0-9]+/g,"_")}function isBridge(){return Boolean(window.name&&window.name===getBridgeName(getDomain()))}var O=new u(function(e){if(window.document&&window.document.body)return e(window.document.body);var n=setInterval(function(){if(window.document&&window.document.body){clearInterval(n);return e(window.document.body)}},10)});function registerRemoteWindow(e){windowStore("remoteWindowPromises").getOrSet(e,function(){return new u})}function findRemoteWindow(e){var n=windowStore("remoteWindowPromises").get(e);if(!n)throw new Error("Remote window promise not found");return n}function registerRemoteSendMessage(e,n,r){findRemoteWindow(e).resolve(function(t,o,i){if(t!==e)throw new Error("Remote window does not match window");if(!matchDomain(o,n))throw new Error("Remote domain "+o+" does not match domain "+n);r.fireAndForget(i)})}function rejectRemoteSendMessage(e,n){findRemoteWindow(e).reject(n).catch(src_util_noop)}function linkWindow(e){var n=e.win,r=e.name,t=e.domain;var o=globalStore("popupWindowsByName");var i=windowStore("popupWindowsByWin");for(var a=0,u=o.keys();a<u.length;a++){var s=u[a];var c=o.get(s);c&&!isWindowClosed(c.win)||o.del(s)}if(isWindowClosed(n))return{win:n,name:r,domain:t};var d=i.getOrSet(n,function(){return r?o.getOrSet(r,function(){return{win:n,name:r}}):{win:n}});if(d.win&&d.win!==n)throw new Error("Different window already linked for window: "+(r||"undefined"));if(r){d.name=r;o.set(r,d)}if(t){d.domain=t;registerRemoteWindow(n)}i.set(n,d);return d}function setupBridge(e){var n=e.on,r=e.send,t=e.receiveMessage;o=window.open,window.open=function(e,n,r,t){var i=o.call(this,normalizeMockUrl(e),n,r,t);if(!i)return i;linkWindow({win:i,name:n,domain:e?getDomainFromUrl(e):null});return i};var o;!function(e){var n=e.on,r=e.send,t=e.receiveMessage;var o=globalStore("popupWindowsByName");n("postrobot_open_tunnel",function(e){var i=e.source,a=e.origin,s=e.data;var c=globalStore("bridges").get(a);if(!c)throw new Error("Can not find bridge promise for domain "+a);return c.then(function(e){if(i!==e)throw new Error("Message source does not matched registered bridge for domain "+a);if(!s.name)throw new Error("Register window expected to be passed window name");if(!s.sendMessage)throw new Error("Register window expected to be passed sendMessage method");if(!o.has(s.name))throw new Error("Window with name "+s.name+" does not exist, or was not opened by this window");var c=function(){return o.get(s.name)};if(!c().domain)throw new Error("We do not have a registered domain for window "+s.name);if(c().domain!==a)throw new Error("Message origin "+a+" does not matched registered window origin "+(c().domain||"unknown"));registerRemoteSendMessage(c().win,a,s.sendMessage);return{sendMessage:function(e){if(window&&!window.closed&&c()){var o=c().domain;if(o)try{t({data:e,origin:o,source:c().win},{on:n,send:r})}catch(e){u.reject(e)}}}}})})}({on:n,send:r,receiveMessage:t});!function(e){var n=e.send;global_getGlobal(window).openTunnelToParent=function(e){var r=e.name,t=e.source,o=e.canary,i=e.sendMessage;var a=globalStore("tunnelWindows");var u=utils_getParent(window);if(!u)throw new Error("No parent window found to open tunnel to");var s=function(e){var n=e.name,r=e.source,t=e.canary,o=e.sendMessage;!function(){var e=globalStore("tunnelWindows");for(var n=0,r=e.keys();n<r.length;n++){var t=r[n];isWindowClosed(e[t].source)&&e.del(t)}}();var i=uniqueID();globalStore("tunnelWindows").set(i,{name:n,source:r,canary:t,sendMessage:o});return i}({name:r,source:t,canary:o,sendMessage:i});return n(u,"postrobot_open_tunnel",{name:r,sendMessage:function(){var e=a.get(s);if(e&&e.source&&!isWindowClosed(e.source)){try{e.canary()}catch(e){return}e.sendMessage.apply(this,arguments)}}},{domain:"*"})}}({send:r});!function(e){var n=e.on,r=e.send,t=e.receiveMessage;u.try(function(){var e=getOpener(window);if(e&&needsBridge({win:e})){registerRemoteWindow(e);return(o=e,windowStore("remoteBridgeAwaiters").getOrSet(o,function(){return u.try(function(){var e=getFrameByName(o,getBridgeName(getDomain()));if(e)return isSameDomain(e)&&global_getGlobal(assertSameDomain(e))?e:new u(function(n){var r;var t;r=setInterval(function(){if(e&&isSameDomain(e)&&global_getGlobal(assertSameDomain(e))){clearInterval(r);clearTimeout(t);return n(e)}},100);t=setTimeout(function(){clearInterval(r);return n()},2e3)})})})).then(function(o){return o?window.name?global_getGlobal(assertSameDomain(o)).openTunnelToParent({name:window.name,source:window,canary:function(){},sendMessage:function(e){try{window}catch(e){return}if(window&&!window.closed)try{t({data:e,origin:this.origin,source:this.source},{on:n,send:r})}catch(e){u.reject(e)}}}).then(function(n){var r=n.source,t=n.origin,o=n.data;if(r!==e)throw new Error("Source does not match opener");registerRemoteSendMessage(r,t,o.sendMessage)}).catch(function(n){rejectRemoteSendMessage(e,n);throw n}):rejectRemoteSendMessage(e,new Error("Can not register with opener: window does not have a name")):rejectRemoteSendMessage(e,new Error("Can not register with opener: no bridge found in opener"))});var o}})}({on:n,send:r,receiveMessage:t})}function cleanupProxyWindows(){var e=globalStore("idToProxyWindow");for(var n=0,r=e.keys();n<r.length;n++){var t=r[n];e.get(t).shouldClean()&&e.del(t)}}function getSerializedWindow(e,n){var r=n.send,t=n.id,o=void 0===t?uniqueID():t;var i=e.then(function(e){if(isSameDomain(e))return assertSameDomain(e).name});var a=e.then(function(e){if(isWindowClosed(e))throw new Error("Window is closed, can not determine type");return getOpener(e)?s.POPUP:s.IFRAME});i.catch(src_util_noop);a.catch(src_util_noop);var c=function(){return e.then(function(e){if(!isWindowClosed(e))return isSameDomain(e)?assertSameDomain(e).name:i})};return{id:o,getType:function(){return a},getInstanceID:memoizePromise(function(){return e.then(function(e){return getWindowInstanceID(e,{send:r})})}),close:function(){return e.then(closeWindow)},getName:c,focus:function(){return e.then(function(e){e.focus()})},isClosed:function(){return e.then(function(e){return isWindowClosed(e)})},setLocation:function(n,r){void 0===r&&(r={});return e.then(function(e){var t=window.location.protocol+"//"+window.location.host;var o=r.method,i=void 0===o?"get":o,a=r.body;if(0===n.indexOf("/"))n=""+t+n;else if(!n.match(/^https?:\/\//)&&0!==n.indexOf(t))throw new Error("Expected url to be http or https url, or absolute path, got "+JSON.stringify(n));if("post"===i)return c().then(function(e){if(!e)throw new Error("Can not post to window without target name");!function(e){var n=e.url,r=e.target,t=e.body,o=e.method,i=void 0===o?"post":o;var a=document.createElement("form");a.setAttribute("target",r);a.setAttribute("method",i);a.setAttribute("action",n);a.style.display="none";if(t)for(var u=0,s=Object.keys(t);u<s.length;u++){var c;var d=s[u];var f=document.createElement("input");f.setAttribute("name",d);f.setAttribute("value",null==(c=t[d])?void 0:c.toString());a.appendChild(f)}getBody().appendChild(a);a.submit();getBody().removeChild(a)}({url:n,target:e,method:i,body:a})});if("get"!==i)throw new Error("Unsupported method: "+i);if(isSameDomain(e))try{if(e.location&&"function"==typeof e.location.replace){e.location.replace(n);return}}catch(e){}e.location=n})},setName:function(n){return e.then(function(e){linkWindow({win:e,name:n});var r=isSameDomain(e);var t=function(e){if(isSameDomain(e))return assertSameDomain(e).frameElement;for(var n=0,r=document.querySelectorAll("iframe");n<r.length;n++){var t=r[n];if(t&&t.contentWindow&&t.contentWindow===e)return t}}(e);if(!r)throw new Error("Can not set name for cross-domain window: "+n);assertSameDomain(e).name=n;t&&t.setAttribute("name",n);i=u.resolve(n)})}}}var R=function(){function ProxyWindow(e){var n=e.send,r=e.win,t=e.serializedWindow;this.id=void 0;this.isProxyWindow=!0;this.serializedWindow=void 0;this.actualWindow=void 0;this.actualWindowPromise=void 0;this.send=void 0;this.name=void 0;this.actualWindowPromise=new u;this.serializedWindow=t||getSerializedWindow(this.actualWindowPromise,{send:n});globalStore("idToProxyWindow").set(this.getID(),this);r&&this.setWindow(r,{send:n})}var e=ProxyWindow.prototype;e.getID=function(){return this.serializedWindow.id};e.getType=function(){return this.serializedWindow.getType()};e.isPopup=function(){return this.getType().then(function(e){return e===s.POPUP})};e.setLocation=function(e,n){var r=this;return this.serializedWindow.setLocation(e,n).then(function(){return r})};e.getName=function(){return this.serializedWindow.getName()};e.setName=function(e){var n=this;return this.serializedWindow.setName(e).then(function(){return n})};e.close=function(){var e=this;return this.serializedWindow.close().then(function(){return e})};e.focus=function(){var e=this;var n=this.isPopup();var r=this.getName();var t=u.hash({isPopup:n,name:r}).then(function(e){var n=e.name;e.isPopup&&n&&window.open("",n)});var o=this.serializedWindow.focus();return u.all([t,o]).then(function(){return e})};e.isClosed=function(){return this.serializedWindow.isClosed()};e.getWindow=function(){return this.actualWindow};e.setWindow=function(e,n){var r=n.send;this.actualWindow=e;this.actualWindowPromise.resolve(this.actualWindow);this.serializedWindow=getSerializedWindow(this.actualWindowPromise,{send:r,id:this.getID()});windowStore("winToProxyWindow").set(e,this)};e.awaitWindow=function(){return this.actualWindowPromise};e.matchWindow=function(e,n){var r=this;var t=n.send;return u.try(function(){return r.actualWindow?e===r.actualWindow:u.hash({proxyInstanceID:r.getInstanceID(),knownWindowInstanceID:getWindowInstanceID(e,{send:t})}).then(function(n){var o=n.proxyInstanceID===n.knownWindowInstanceID;o&&r.setWindow(e,{send:t});return o})})};e.unwrap=function(){return this.actualWindow||this};e.getInstanceID=function(){return this.serializedWindow.getInstanceID()};e.shouldClean=function(){return Boolean(this.actualWindow&&isWindowClosed(this.actualWindow))};e.serialize=function(){return this.serializedWindow};ProxyWindow.unwrap=function(e){return ProxyWindow.isProxyWindow(e)?e.unwrap():e};ProxyWindow.serialize=function(e,n){var r=n.send;cleanupProxyWindows();return ProxyWindow.toProxyWindow(e,{send:r}).serialize()};ProxyWindow.deserialize=function(e,n){var r=n.send;cleanupProxyWindows();return globalStore("idToProxyWindow").get(e.id)||new ProxyWindow({serializedWindow:e,send:r})};ProxyWindow.isProxyWindow=function(e){return Boolean(e&&!isWindow(e)&&e.isProxyWindow)};ProxyWindow.toProxyWindow=function(e,n){var r=n.send;cleanupProxyWindows();if(ProxyWindow.isProxyWindow(e))return e;var t=e;return windowStore("winToProxyWindow").get(t)||new ProxyWindow({win:t,send:r})};return ProxyWindow}();function addMethod(e,n,r,t,o){var i=windowStore("methodStore");var a=globalStore("proxyWindowMethods");if(R.isProxyWindow(t))a.set(e,{val:n,name:r,domain:o,source:t});else{a.del(e);i.getOrSet(t,function(){return{}})[e]={domain:o,name:r,val:n,source:t}}}function lookupMethod(e,n){var r=windowStore("methodStore");var t=globalStore("proxyWindowMethods");return r.getOrSet(e,function(){return{}})[n]||t.get(n)}function function_serializeFunction(e,n,r,t,o){a=(i={on:o.on,send:o.send}).on,s=i.send,globalStore("builtinListeners").getOrSet("functionCalls",function(){return a("postrobot_method",{domain:"*"},function(e){var n=e.source,r=e.origin,t=e.data;var o=t.id,i=t.name;var a=lookupMethod(n,o);if(!a)throw new Error("Could not find method '"+i+"' with id: "+t.id+" in "+getDomain(window));var c=a.source,d=a.domain,f=a.val;return u.try(function(){if(!matchDomain(d,r))throw new Error("Method '"+t.name+"' domain "+JSON.stringify(util_isRegex(a.domain)?a.domain.source:a.domain)+" does not match origin "+r+" in "+getDomain(window));if(R.isProxyWindow(c))return c.matchWindow(n,{send:s}).then(function(e){if(!e)throw new Error("Method call '"+t.name+"' failed - proxy window does not match source in "+getDomain(window))})}).then(function(){return f.apply({source:n,origin:r},t.args)},function(e){return u.try(function(){if(f.onError)return f.onError(e)}).then(function(){e.stack&&(e.stack="Remote call to "+i+"("+function(e){void 0===e&&(e=[]);return arrayFrom(e).map(function(e){return"string"==typeof e?"'"+e+"'":void 0===e?"undefined":null===e?"null":"boolean"==typeof e?e.toString():Array.isArray(e)?"[ ... ]":"object"==typeof e?"{ ... }":"function"==typeof e?"() => { ... }":"<"+typeof e+">"}).join(", ")}(t.args)+") failed\n\n"+e.stack);throw e})}).then(function(e){return{result:e,id:o,name:i}})})});var i,a,s;var c=r.__id__||uniqueID();e=R.unwrap(e);var d=r.__name__||r.name||t;"string"==typeof d&&"function"==typeof d.indexOf&&0===d.indexOf("anonymous::")&&(d=d.replace("anonymous::",t+"::"));if(R.isProxyWindow(e)){addMethod(c,r,d,e,n);e.awaitWindow().then(function(e){addMethod(c,r,d,e,n)})}else addMethod(c,r,d,e,n);return serializeType("cross_domain_function",{id:c,name:d})}function serializeMessage(e,n,r,t){var o;var i=t.on,a=t.send;return function(e,n){void 0===n&&(n=S);var r=JSON.stringify(e,function(e){var r=this[e];if(isSerializedType(this))return r;var t=determineType(r);if(!t)return r;var o=n[t]||x[t];return o?o(r,e):r});return void 0===r?"undefined":r}(r,((o={}).promise=function(r,t){return function(e,n,r,t,o){return serializeType("cross_domain_zalgo_promise",{then:function_serializeFunction(e,n,function(e,n){return r.then(e,n)},t,{on:o.on,send:o.send})})}(e,n,r,t,{on:i,send:a})},o.function=function(r,t){return function_serializeFunction(e,n,r,t,{on:i,send:a})},o.object=function(e){return isWindow(e)||R.isProxyWindow(e)?serializeType("cross_domain_window",R.serialize(e,{send:a})):e},o))}function deserializeMessage(e,n,r,t){var o;var i=t.send;return function(e,n){void 0===n&&(n=A);if("undefined"!==e)return JSON.parse(e,function(e,r){if(isSerializedType(this))return r;var t;var o;if(isSerializedType(r)){t=r.__type__;o=r.__val__}else{t=determineType(r);o=r}if(!t)return o;var i=n[t]||C[t];return i?i(o,e):o})}(r,((o={}).cross_domain_zalgo_promise=function(e){return function(e,n,r){return new u(r.then)}(0,0,e)},o.cross_domain_function=function(r){return function(e,n,r,t){var o=r.id,i=r.name;var a=t.send;var u=function(r){void 0===r&&(r={});function crossDomainFunctionWrapper(){var t=arguments;return R.toProxyWindow(e,{send:a}).awaitWindow().then(function(e){var u=lookupMethod(e,o);if(u&&u.val!==crossDomainFunctionWrapper)return u.val.apply({source:window,origin:getDomain()},t);var s=[].slice.call(t);return r.fireAndForget?a(e,"postrobot_method",{id:o,name:i,args:s},{domain:n,fireAndForget:!0}):a(e,"postrobot_method",{id:o,name:i,args:s},{domain:n,fireAndForget:!1}).then(function(e){return e.data.result})}).catch(function(e){throw e})}crossDomainFunctionWrapper.__name__=i;crossDomainFunctionWrapper.__origin__=n;crossDomainFunctionWrapper.__source__=e;crossDomainFunctionWrapper.__id__=o;crossDomainFunctionWrapper.origin=n;return crossDomainFunctionWrapper};var s=u();s.fireAndForget=u({fireAndForget:!0});return s}(e,n,r,{send:i})},o.cross_domain_window=function(e){return R.deserialize(e,{send:i})},o))}var z={};z.postrobot_post_message=function(e,n,r){0===r.indexOf("file:")&&(r="*");e.postMessage(n,r)};z.postrobot_bridge=function(e,n,r){if(!needsBridgeForBrowser()&&!isBridge())throw new Error("Bridge not needed for browser");if(isSameDomain(e))throw new Error("Post message through bridge disabled between same domain windows");if(!1!==isSameTopWindow(window,e))throw new Error("Can only use bridge to communicate between two different windows, not between frames");!function(e,n,r){var t=isOpener(window,e);var o=isOpener(e,window);if(!t&&!o)throw new Error("Can only send messages to and from parent and popup windows");findRemoteWindow(e).then(function(t){return t(e,n,r)})}(e,r,n)};z.postrobot_global=function(e,n){if(!utils_getUserAgent(window).match(/MSIE|rv:11|trident|edge\/12|edge\/13/i))throw new Error("Global messaging not needed for browser");if(!isSameDomain(e))throw new Error("Post message through global disabled between different domain windows");if(!1!==isSameTopWindow(window,e))throw new Error("Can only use global to communicate between two different windows, not between frames");var r=global_getGlobal(e);if(!r)throw new Error("Can not find postRobot global on foreign window");r.receiveMessage({source:window,origin:getDomain(),data:n})};function send_sendMessage(e,n,r,t){var o=t.on,i=t.send;return u.try(function(){var t=windowStore().getOrSet(e,function(){return{}});t.buffer=t.buffer||[];t.buffer.push(r);t.flush=t.flush||u.flush().then(function(){if(isWindowClosed(e))throw new Error("Window is closed");var r=serializeMessage(e,n,((a={}).__post_robot_10_0_44__=t.buffer||[],a),{on:o,send:i});var a;delete t.buffer;var u=Object.keys(z);var s=[];for(var c=0;c<u.length;c++){var d=u[c];try{z[d](e,r,n)}catch(e){s.push(e)}}if(s.length===u.length)throw new Error("All post-robot messaging strategies failed:\n\n"+s.map(function(e,n){return n+". "+stringifyError(e)}).join("\n\n"))});return t.flush.then(function(){delete t.flush})}).then(src_util_noop)}function getResponseListener(e){return globalStore("responseListeners").get(e)}function deleteResponseListener(e){globalStore("responseListeners").del(e)}function isResponseListenerErrored(e){return globalStore("erroredResponseListeners").has(e)}function getRequestListener(e){var n=e.name,r=e.win,t=e.domain;var o=windowStore("requestListeners");"*"===r&&(r=null);"*"===t&&(t=null);if(!n)throw new Error("Name required to get request listener");for(var i=0,a=[r,getWildcard()];i<a.length;i++){var u=a[i];if(u){var s=o.get(u);if(s){var c=s[n];if(c){if(t&&"string"==typeof t){if(c[t])return c[t];if(c.__domain_regex__)for(var d=0,f=c.__domain_regex__;d<f.length;d++){var l=f[d],w=l.listener;if(matchDomain(l.regex,t))return w}}if(c["*"])return c["*"]}}}}}function handleRequest(e,n,r,t){var o=t.on,i=t.send;var a=getRequestListener({name:r.name,win:e,domain:n});var s="postrobot_method"===r.name&&r.data&&"string"==typeof r.data.name?r.data.name+"()":r.name;function sendResponse(t,a,c){return u.flush().then(function(){if(!r.fireAndForget&&!isWindowClosed(e))try{return send_sendMessage(e,n,{id:uniqueID(),origin:getDomain(window),type:"postrobot_message_response",hash:r.hash,name:r.name,ack:t,data:a,error:c},{on:o,send:i})}catch(e){throw new Error("Send response message failed for "+s+" in "+getDomain()+"\n\n"+stringifyError(e))}})}return u.all([u.flush().then(function(){if(!r.fireAndForget&&!isWindowClosed(e))try{return send_sendMessage(e,n,{id:uniqueID(),origin:getDomain(window),type:"postrobot_message_ack",hash:r.hash,name:r.name},{on:o,send:i})}catch(e){throw new Error("Send ack message failed for "+s+" in "+getDomain()+"\n\n"+stringifyError(e))}}),u.try(function(){if(!a)throw new Error("No handler found for post message: "+r.name+" from "+n+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!matchDomain(a.domain,n))throw new Error("Request origin "+n+" does not match domain "+a.domain.toString());return a.handler({source:e,origin:n,data:r.data})}).then(function(e){return sendResponse("success",e)},function(e){return sendResponse("error",null,e)})]).then(src_util_noop).catch(function(e){if(a&&a.handleError)return a.handleError(e);throw e})}function handleAck(e,n,r){if(!isResponseListenerErrored(r.hash)){var t=getResponseListener(r.hash);if(!t)throw new Error("No handler found for post message ack for message: "+r.name+" from "+n+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);try{if(!matchDomain(t.domain,n))throw new Error("Ack origin "+n+" does not match domain "+t.domain.toString());if(e!==t.win)throw new Error("Ack source does not match registered window")}catch(e){t.promise.reject(e)}t.ack=!0}}function handleResponse(e,n,r){if(!isResponseListenerErrored(r.hash)){var t=getResponseListener(r.hash);if(!t)throw new Error("No handler found for post message response for message: "+r.name+" from "+n+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!matchDomain(t.domain,n))throw new Error("Response origin "+n+" does not match domain "+(o=t.domain,Array.isArray(o)?"("+o.join(" | ")+")":isRegex(o)?"RegExp("+o.toString()+")":o.toString()));var o;if(e!==t.win)throw new Error("Response source does not match registered window");deleteResponseListener(r.hash);"error"===r.ack?t.promise.reject(r.error):"success"===r.ack&&t.promise.resolve({source:e,origin:n,data:r.data})}}function receive_receiveMessage(e,n){var r=n.on,t=n.send;var o=globalStore("receivedMessages");try{if(!window||window.closed||!e.source)return}catch(e){return}var i=e.source,a=e.origin;var u=function(e,n,r,t){var o=t.on,i=t.send;var a;try{a=deserializeMessage(n,r,e,{on:o,send:i})}catch(e){return}if(a&&"object"==typeof a&&null!==a){var u=a.__post_robot_10_0_44__;if(Array.isArray(u))return u}}(e.data,i,a,{on:r,send:t});if(u){markWindowKnown(i);for(var s=0;s<u.length;s++){var c=u[s];if(o.has(c.id))return;o.set(c.id,!0);if(isWindowClosed(i)&&!c.fireAndForget)return;0===c.origin.indexOf("file:")&&(a="file://");try{"postrobot_message_request"===c.type?handleRequest(i,a,c,{on:r,send:t}):"postrobot_message_response"===c.type?handleResponse(i,a,c):"postrobot_message_ack"===c.type&&handleAck(i,a,c)}catch(e){setTimeout(function(){throw e},0)}}}}function on_on(e,n,r){if(!e)throw new Error("Expected name");if("function"==typeof(n=n||{})){r=n;n={}}if(!r)throw new Error("Expected handler");(n=n||{}).name=e;n.handler=r||n.handler;var t=n.window;var o=n.domain;var i=function addRequestListener(e,n){var r=e.name,t=e.win,o=e.domain;var i=windowStore("requestListeners");if(!r||"string"!=typeof r)throw new Error("Name required to add request listener");if(Array.isArray(t)){var a=[];for(var u=0,s=t;u<s.length;u++)a.push(addRequestListener({name:r,domain:o,win:s[u]},n));return{cancel:function(){for(var e=0;e<a.length;e++)a[e].cancel()}}}if(Array.isArray(o)){var c=[];for(var d=0,f=o;d<f.length;d++)c.push(addRequestListener({name:r,win:t,domain:f[d]},n));return{cancel:function(){for(var e=0;e<c.length;e++)c[e].cancel()}}}var l=getRequestListener({name:r,win:t,domain:o});t&&"*"!==t||(t=getWildcard());o=o||"*";if(l)throw t&&o?new Error("Request listener already exists for "+r+" on domain "+o.toString()+" for "+(t===getWildcard()?"wildcard":"specified")+" window"):t?new Error("Request listener already exists for "+r+" for "+(t===getWildcard()?"wildcard":"specified")+" window"):o?new Error("Request listener already exists for "+r+" on domain "+o.toString()):new Error("Request listener already exists for "+r);var w=i.getOrSet(t,function(){return{}});var p=util_getOrSet(w,r,function(){return{}});var h=o.toString();var v;var m;util_isRegex(o)?(v=util_getOrSet(p,"__domain_regex__",function(){return[]})).push(m={regex:o,listener:n}):p[h]=n;return{cancel:function(){delete p[h];if(m){v.splice(v.indexOf(m,1));v.length||delete p.__domain_regex__}Object.keys(p).length||delete w[r];t&&!Object.keys(w).length&&i.del(t)}}}({name:e,win:t,domain:o},{handler:n.handler,handleError:n.errorHandler||function(e){throw e},window:t,domain:o||"*",name:e});return{cancel:function(){i.cancel()}}}var T=function send(e,n,r,t){var o=(t=t||{}).domain||"*";var i=t.timeout||-1;var a=t.timeout||5e3;var s=t.fireAndForget||!1;return u.try(function(){!function(e,n,r){if(!e)throw new Error("Expected name");if(r&&"string"!=typeof r&&!Array.isArray(r)&&!util_isRegex(r))throw new TypeError("Can not send "+e+". Expected domain "+JSON.stringify(r)+" to be a string, array, or regex");if(isWindowClosed(n))throw new Error("Can not send "+e+". Target window is closed")}(n,e,o);if(function(e,n){var r=getAncestor(n);if(r)return r===e;if(n===e)return!1;if(getTop(n)===n)return!1;for(var t=0,o=getFrames(e);t<o.length;t++)if(o[t]===n)return!0;return!1}(window,e))return awaitWindowHello(e,a)}).then(function(n){return function(e,n,r,t){var o=t.send;return u.try(function(){return"string"==typeof n?n:u.try(function(){return r||sayHello(e,{send:o}).then(function(e){return e.domain})}).then(function(e){if(!matchDomain(n,n))throw new Error("Domain "+stringify(n)+" does not match "+stringify(n));return e})})}(e,o,(void 0===n?{}:n).domain,{send:send})}).then(function(t){var o=t;var a="postrobot_method"===n&&r&&"string"==typeof r.name?r.name+"()":n;var c=new u;var d=n+"_"+uniqueID();if(!s){var f={name:n,win:e,domain:o,promise:c};!function(e,n){globalStore("responseListeners").set(e,n)}(d,f);var l=windowStore("requestPromises").getOrSet(e,function(){return[]});l.push(c);c.catch(function(){!function(e){globalStore("erroredResponseListeners").set(e,!0)}(d);deleteResponseListener(d)});var w=function(e){return windowStore("knownWindows").get(e,!1)}(e)?1e4:2e3;var p=i;var h=w;var v=p;var m=safeInterval(function(){if(isWindowClosed(e))return c.reject(new Error("Window closed for "+n+" before "+(f.ack?"response":"ack")));if(f.cancelled)return c.reject(new Error("Response listener was cancelled for "+n));h=Math.max(h-500,0);-1!==v&&(v=Math.max(v-500,0));return f.ack||0!==h?0===v?c.reject(new Error("No response for postMessage "+a+" in "+getDomain()+" in "+p+"ms")):void 0:c.reject(new Error("No ack for postMessage "+a+" in "+getDomain()+" in "+w+"ms"))},500);c.finally(function(){m.cancel();l.splice(l.indexOf(c,1))}).catch(src_util_noop)}return send_sendMessage(e,o,{id:uniqueID(),origin:getDomain(window),type:"postrobot_message_request",hash:d,name:n,data:r,fireAndForget:s},{on:on_on,send:send}).then(function(){return s?c.resolve():c},function(e){throw new Error("Send request message failed for "+a+" in "+getDomain()+"\n\n"+stringifyError(e))})})};function setup_serializeMessage(e,n,r){return serializeMessage(e,n,r,{on:on_on,send:T})}function setup_deserializeMessage(e,n,r){return deserializeMessage(e,n,r,{on:on_on,send:T})}function setup_toProxyWindow(e){return R.toProxyWindow(e,{send:T})}function cleanUpWindow(e){for(var n=0,r=windowStore("requestPromises").get(e,[]);n<r.length;n++)r[n].reject(new Error("Window "+(isWindowClosed(e)?"closed":"cleaned up")+" before response")).catch(src_util_noop)}var F;F={setupBridge:setupBridge,openBridge:function(e,n){var r=globalStore("bridges");var t=globalStore("bridgeFrames");n=n||getDomainFromUrl(e);return r.getOrSet(n,function(){return u.try(function(){if(getDomain()===n)throw new Error("Can not open bridge on the same domain as current domain: "+n);var r=getBridgeName(n);if(getFrameByName(window,r))throw new Error("Frame with name "+r+" already exists on page");var o=function(e,n){var r=document.createElement("iframe");r.setAttribute("name",e);r.setAttribute("id",e);r.setAttribute("style","display: none; margin: 0; padding: 0; border: 0px none; overflow: hidden;");r.setAttribute("frameborder","0");r.setAttribute("border","0");r.setAttribute("scrolling","no");r.setAttribute("allowTransparency","true");r.setAttribute("tabindex","-1");r.setAttribute("hidden","true");r.setAttribute("title","");r.setAttribute("role","presentation");r.src=n;return r}(r,e);t.set(n,o);return O.then(function(n){n.appendChild(o);var r=o.contentWindow;return new u(function(e,n){o.addEventListener("load",e);o.addEventListener("error",n)}).then(function(){return awaitWindowHello(r,5e3,"Bridge "+e)}).then(function(){return r})})})})},linkWindow:linkWindow,linkUrl:function(e,n){linkWindow({win:e,domain:getDomainFromUrl(n)})},isBridge:isBridge,needsBridge:needsBridge,needsBridgeForBrowser:needsBridgeForBrowser,hasBridge:function(e,n){return globalStore("bridges").has(n||getDomainFromUrl(e))},needsBridgeForWin:needsBridgeForWin,needsBridgeForDomain:needsBridgeForDomain,destroyBridges:function(){var e=globalStore("bridges");var n=globalStore("bridgeFrames");for(var r=0,t=n.keys();r<t.length;r++){var o=n.get(t[r]);o&&o.parentNode&&o.parentNode.removeChild(o)}n.reset();e.reset()}};function lib_global_getGlobal(e){void 0===e&&(e=window);if(!isSameDomain(e))throw new Error("Can not get global for window on different domain");e.__zoid_9_0_71__||(e.__zoid_9_0_71__={});return e.__zoid_9_0_71__}function getProxyObject(e){return{get:function(){var n=this;return u.try(function(){if(n.source&&n.source!==window)throw new Error("Can not call get on proxy object from a remote window");return e})}}}var M={STRING:"string",OBJECT:"object",FUNCTION:"function",BOOLEAN:"boolean",NUMBER:"number",ARRAY:"array"};var I={JSON:"json",DOTIFY:"dotify",BASE64:"base64"};var N=s;var j={RENDER:"zoid-render",RENDERED:"zoid-rendered",DISPLAY:"zoid-display",ERROR:"zoid-error",CLOSE:"zoid-close",DESTROY:"zoid-destroy",PROPS:"zoid-props",RESIZE:"zoid-resize",FOCUS:"zoid-focus"};function normalizeChildProp(e,n,r,t,o){if(!e.hasOwnProperty(r))return t;var i=e[r];return"function"==typeof i.childDecorate?i.childDecorate({value:t,uid:o.uid,close:o.close,focus:o.focus,onError:o.onError,onProps:o.onProps,resize:o.resize,getParent:o.getParent,getParentDomain:o.getParentDomain,show:o.show,hide:o.hide,export:o.export}):t}function parseChildWindowName(e){return inlineMemoize(parseChildWindowName,function(){if(!e)throw new Error("No window name");var n=e.split("__"),r=n[1],t=n[2],o=n[3];if("zoid"!==r)throw new Error("Window not rendered by zoid - got "+r);if(!t)throw new Error("Expected component name");if(!o)throw new Error("Expected encoded payload");try{return JSON.parse(function(e){if("function"==typeof atob)return decodeURIComponent([].map.call(atob(e),function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""));if("undefined"!=typeof Buffer)return Buffer.from(e,"base64").toString("utf8");throw new Error("Can not find window.atob or Buffer")}(o))}catch(e){throw new Error("Can not decode window name payload: "+o+": "+stringifyError(e))}},[e])}function getChildPayload(){try{return parseChildWindowName(window.name)}catch(e){}}function child_focus(){return u.try(function(){window.focus()})}function child_destroy(){return u.try(function(){window.close()})}var q=function(){return src_util_noop};var L=function(e){return once(e.value)};function eachProp(e,n,r){for(var t=0,o=Object.keys(e);t<o.length;t++){var i=o[t];var a=n[i];a&&r(i,a,e[i])}}function serializeProps(e,n,r){var t={};return u.all(function(e,n,o){var i=[];eachProp(e,n,function(e,n,o){var a=function(e,n,o){return u.resolve().then(function(){var i,a;if(null!=o){var s=(i={},i.get=n.queryParam,i.post=n.bodyParam,i)[r];var c=(a={},a.get=n.queryValue,a.post=n.bodyValue,a)[r];if(s)return u.hash({finalParam:u.try(function(){return"function"==typeof s?s({value:o}):"string"==typeof s?s:e}),finalValue:u.try(function(){return"function"==typeof c&&isDefined(o)?c({value:o}):o})}).then(function(r){var o=r.finalParam,i=r.finalValue;var a;if("boolean"==typeof i)a=i.toString();else if("string"==typeof i)a=i.toString();else if("object"==typeof i&&null!==i){if(n.serialization===I.JSON)a=JSON.stringify(i);else if(n.serialization===I.BASE64)a=base64encode(JSON.stringify(i));else if(n.serialization===I.DOTIFY||!n.serialization){a=function dotify(e,n,r){void 0===n&&(n="");void 0===r&&(r={});n=n?n+".":n;for(var t in e)e.hasOwnProperty(t)&&null!=e[t]&&"function"!=typeof e[t]&&(e[t]&&Array.isArray(e[t])&&e[t].length&&e[t].every(function(e){return"object"!=typeof e})?r[""+n+t+"[]"]=e[t].join(","):e[t]&&"object"==typeof e[t]?r=dotify(e[t],""+n+t,r):r[""+n+t]=e[t].toString());return r}(i,e);for(var u=0,s=Object.keys(a);u<s.length;u++){var c=s[u];t[c]=a[c]}return}}else"number"==typeof i&&(a=i.toString());t[o]=a})}})}(e,n,o);i.push(a)});return i}(n,e)).then(function(){return t})}function parentComponent(e){var n=e.options,r=e.overrides,t=void 0===r?{}:r,o=e.parentWin,i=void 0===o?window:o;var a=n.propsDef,s=n.containerTemplate,c=n.prerenderTemplate,d=n.tag,f=n.name,l=n.attributes,w=n.dimensions,p=n.autoResize,h=n.url,v=n.domain,g=n.exports;var y=new u;var _=[];var b=cleanup();var E={};var P={visible:!0};var W=t.event?t.event:(x={},S={},D={on:function(e,n){var r=S[e]=S[e]||[];r.push(n);var t=!1;return{cancel:function(){if(!t){t=!0;r.splice(r.indexOf(n),1)}}}},once:function(e,n){var r=D.on(e,function(){r.cancel();n()});return r},trigger:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),t=1;t<n;t++)r[t-1]=arguments[t];var o=S[e];var i=[];if(o){var a=function(e){var n=o[e];i.push(u.try(function(){return n.apply(void 0,r)}))};for(var s=0;s<o.length;s++)a(s)}return u.all(i).then(src_util_noop)},triggerOnce:function(e){if(x[e])return u.resolve();x[e]=!0;for(var n=arguments.length,r=new Array(n>1?n-1:0),t=1;t<n;t++)r[t-1]=arguments[t];return D.trigger.apply(D,[e].concat(r))},reset:function(){S={}}});var x,S,D;var C=t.props?t.props:{};var A;var O;var z;var M=t.onError;var I=t.getProxyContainer;var q=t.show;var L=t.hide;var k=t.close;var B=t.renderContainer;var U=t.getProxyWindow;var Z=t.setProxyWin;var H=t.openFrame;var G=t.openPrerenderFrame;var J=t.prerender;var $=t.open;var Y=t.openPrerender;var K=t.watchForUnload;var Q=t.getInternalState;var X=t.setInternalState;var V=function(){return u.try(function(){return t.resolveInitPromise?t.resolveInitPromise():y.resolve()})};var ee=function(e){return u.try(function(){return t.rejectInitPromise?t.rejectInitPromise(e):y.reject(e)})};var ne=function(e){var n={};for(var r=0,t=Object.keys(C);r<t.length;r++){var o=t[r];var i=a[o];i&&!1===i.sendToChild||i&&i.sameDomain&&!matchDomain(e,getDomain(window))||(n[o]=C[o])}return u.hash(n)};var re=function(){return u.try(function(){return Q?Q():P})};var te=function(e){return u.try(function(){return X?X(e):P=_extends({},P,e)})};var oe=function(){return U?U():u.try(function(){var e=C.window;if(e){var n=setup_toProxyWindow(e);b.register(function(){return e.close()});return n}return new R({send:T})})};var ie=function(e){return I?I(e):u.try(function(){return elementReady(e)}).then(function(e){isShadowElement(e)&&(e=function insertShadowSlot(e){var n=function(e){var n=function(e){for(;e.parentNode;)e=e.parentNode;if(isShadowElement(e))return e}(e);if(n&&n.host)return n.host}(e);if(!n)throw new Error("Element is not in shadow dom");var r="shadow-slot-"+uniqueID();var t=document.createElement("slot");t.setAttribute("name",r);e.appendChild(t);var o=document.createElement("div");o.setAttribute("slot",r);n.appendChild(o);return isShadowElement(n)?insertShadowSlot(o):o}(e));return getProxyObject(e)})};var ae=function(e){return Z?Z(e):u.try(function(){A=e})};var ue=function(){return q?q():u.hash({setState:te({visible:!0}),showElement:O?O.get().then(showElement):null}).then(src_util_noop)};var se=function(){return L?L():u.hash({setState:te({visible:!1}),showElement:O?O.get().then(hideElement):null}).then(src_util_noop)};var ce=function(){return"function"==typeof h?h({props:C}):h};var de=function(){return"function"==typeof l?l({props:C}):l};var fe=function(){return v&&"string"==typeof v?v:getDomainFromUrl(ce())};var le=function(){return v&&util_isRegex(v)?v:fe()};var we=function(e,n){var r=n.windowName;return H?H(e,{windowName:r}):u.try(function(){if(e===N.IFRAME)return getProxyObject(dom_iframe({attributes:_extends({name:r,title:f},de().iframe)}))})};var pe=function(e){return G?G(e):u.try(function(){if(e===N.IFRAME)return getProxyObject(dom_iframe({attributes:_extends({name:"__zoid_prerender_frame__"+f+"_"+uniqueID()+"__",title:"prerender__"+f},de().iframe)}))})};var he=function(e,n,r){return Y?Y(e,n,r):u.try(function(){if(e===N.IFRAME){if(!r)throw new Error("Expected proxy frame to be passed");return r.get().then(function(e){b.register(function(){return destroyElement(e)});return awaitFrameWindow(e).then(function(e){return assertSameDomain(e)}).then(function(e){return setup_toProxyWindow(e)})})}if(e===N.POPUP)return n;throw new Error("No render context available for "+e)})};var ve=function(){return u.try(function(){if(A)return u.all([W.trigger(j.FOCUS),A.focus()]).then(src_util_noop)})};var me=function(e,n,r,t){if(n===getDomain(window)){var o=lib_global_getGlobal(window);o.windows=o.windows||{};o.windows[r]=window;b.register(function(){delete o.windows[r]});return{type:"global",uid:r}}return t===N.POPUP?{type:"opener"}:{type:"parent",distance:getDistanceFromTop(window)}};var ge=function(e){return u.try(function(){z=e;V();b.register(function(){return e.close.fireAndForget().catch(src_util_noop)})})};var ye=function(e){var n=e.width,r=e.height;return u.try(function(){W.trigger(j.RESIZE,{width:n,height:r})})};var _e=function(e){return u.try(function(){return W.trigger(j.DESTROY)}).catch(src_util_noop).then(function(){return b.all(e)}).then(function(){y.asyncReject(e||new Error("Component destroyed"))})};var be=memoize(function(e){return u.try(function(){if(k){if(isWindowClosed(k.__source__))return;return k()}return u.try(function(){return W.trigger(j.CLOSE)}).then(function(){return _e(e||new Error("Component closed"))})})});var Ee=function(e,n){var r=n.proxyWin,t=n.proxyFrame,o=n.windowName;return $?$(e,{proxyWin:r,proxyFrame:t,windowName:o}):u.try(function(){if(e===N.IFRAME){if(!t)throw new Error("Expected proxy frame to be passed");return t.get().then(function(e){return awaitFrameWindow(e).then(function(n){b.register(function(){return destroyElement(e)});b.register(function(){return cleanUpWindow(n)});return n})})}if(e===N.POPUP){var n=w.width,r=w.height;n=normalizeDimension(n,window.outerWidth);r=normalizeDimension(r,window.outerWidth);var i=function(e,n){var r=(n=n||{}).width,t=n.height;var o=0;var i=0;r&&(window.outerWidth?i=Math.round((window.outerWidth-r)/2)+window.screenX:window.screen.width&&(i=Math.round((window.screen.width-r)/2)));t&&(window.outerHeight?o=Math.round((window.outerHeight-t)/2)+window.screenY:window.screen.height&&(o=Math.round((window.screen.height-t)/2)));r&&t&&(n=_extends({top:o,left:i,width:r,height:t,status:1,toolbar:0,menubar:0,resizable:1,scrollbars:1},n));var a=n.name||"";delete n.name;var u=Object.keys(n).map(function(e){if(null!=n[e])return e+"="+stringify(n[e])}).filter(Boolean).join(",");var s;try{s=window.open("",a,u)}catch(c){throw new m("Can not open popup window - "+(c.stack||c.message))}if(isWindowClosed(s)){var c;throw new m("Can not open popup window - blocked")}window.addEventListener("unload",function(){return s.close()});return s}(0,_extends({name:o,width:n,height:r},de().popup));b.register(function(){return closeWindow(i)});b.register(function(){return cleanUpWindow(i)});return i}throw new Error("No render context available for "+e)}).then(function(e){r.setWindow(e,{send:T});return r.setName(o).then(function(){return r})})};var Pe=function(){return u.try(function(){var e=addEventListener(window,"unload",once(function(){_e(new Error("Window navigated away"))}));var n=onCloseWindow(i,_e,3e3);b.register(n.cancel);b.register(e.cancel);if(K)return K()})};var We=function(e){var n=!1;return e.isClosed().then(function(r){if(r){n=!0;return be(new Error("Detected component window close"))}return u.delay(200).then(function(){return e.isClosed()}).then(function(e){if(e){n=!0;return be(new Error("Detected component window close"))}})}).then(function(){return n})};var xe=function(e){return M?M(e):u.try(function(){if(-1===_.indexOf(e)){_.push(e);y.asyncReject(e);return W.trigger(j.ERROR,e)}})};var Se=new u;var De=function(e){return u.try(function(){Se.resolve(e)})};ge.onError=xe;var Ce=function(e,n){return e({container:n.container,context:n.context,uid:n.uid,doc:n.doc,frame:n.frame,prerenderFrame:n.prerenderFrame,focus:ve,close:be,state:E,props:C,tag:d,dimensions:w,event:W})};var Ae=function(e,n){var r=n.context,t=n.uid;return J?J(e,{context:r,uid:t}):u.try(function(){if(c){var n=e.getWindow();if(n&&isSameDomain(n)&&function(e){try{if(!e.location.href)return!0;if("about:blank"===e.location.href)return!0}catch(e){}return!1}(n)){var o=(n=assertSameDomain(n)).document;var i=Ce(c,{context:r,uid:t,doc:o});if(i){if(i.ownerDocument!==o)throw new Error("Expected prerender template to have been created with document from child window");!function(e,n){var r=n.tagName.toLowerCase();if("html"!==r)throw new Error("Expected element to be html, got "+r);var t=e.document.documentElement;for(var o=0,i=arrayFrom(t.children);o<i.length;o++)t.removeChild(i[o]);for(var a=0,u=arrayFrom(n.children);a<u.length;a++)t.appendChild(u[a])}(n,i);var a=p.width,u=void 0!==a&&a,s=p.height,d=void 0!==s&&s,f=p.element,l=void 0===f?"body":f;if((l=getElementSafe(l,o))&&(u||d)){var w=onResize(l,function(e){ye({width:u?e.width:void 0,height:d?e.height:void 0})},{width:u,height:d,win:n});W.on(j.RENDERED,w.cancel)}}}}})};var Oe=function(e,n){var r=n.proxyFrame,t=n.proxyPrerenderFrame,o=n.context,i=n.uid,a=n.rerender;return B?B(e,{proxyFrame:r,proxyPrerenderFrame:t,context:o,uid:i,rerender:a}):u.hash({container:e.get(),frame:r?r.get():null,prerenderFrame:t?t.get():null,internalState:re()}).then(function(e){var n=e.container,r=e.internalState.visible;var t=Ce(s,{context:o,uid:i,container:n,frame:e.frame,prerenderFrame:e.prerenderFrame,doc:document});if(t){r||hideElement(t);appendChild(n,t);var c=function(e,n){n=once(n);var r=!1;var t=[];var o;var i;var a;var u=function(){r=!0;for(var e=0;e<t.length;e++)t[e].disconnect();o&&o.cancel();a&&a.removeEventListener("unload",s);i&&destroyElement(i)};var s=function(){if(!r){n();u()}};if(isElementClosed(e)){s();return{cancel:u}}if(window.MutationObserver){var c=e.parentElement;for(;c;){var d=new window.MutationObserver(function(){isElementClosed(e)&&s()});d.observe(c,{childList:!0});t.push(d);c=c.parentElement}}(i=document.createElement("iframe")).setAttribute("name","__detect_close_"+uniqueID()+"__");i.style.display="none";awaitFrameWindow(i).then(function(e){(a=assertSameDomain(e)).addEventListener("unload",s)});e.appendChild(i);o=safeInterval(function(){isElementClosed(e)&&s()},1e3);return{cancel:u}}(t,function(){var e=new Error("Detected container element removed from DOM");return u.delay(1).then(function(){if(!isElementClosed(t)){b.all(e);return a().then(V,ee)}be(e)})});b.register(function(){return c.cancel()});b.register(function(){return destroyElement(t)});return O=getProxyObject(t)}})};var Re=function(){return{state:E,event:W,close:be,focus:ve,resize:ye,onError:xe,updateProps:Te,show:ue,hide:se}};var ze=function(e,n){void 0===n&&(n=!1);var r=Re();!function(e,n,r,t,o){void 0===o&&(o=!1);extend(n,r=r||{});var i=o?[]:[].concat(Object.keys(e));for(var a=0,u=Object.keys(r);a<u.length;a++){var s=u[a];-1===i.indexOf(s)&&i.push(s)}var c=[];var d=t.state,f=t.close,l=t.focus,w=t.event,p=t.onError;for(var h=0;h<i.length;h++){var v=i[h];var m=e[v];var g=r[v];if(m){var y=m.alias;if(y){!isDefined(g)&&isDefined(r[y])&&(g=r[y]);c.push(y)}m.value&&(g=m.value({props:n,state:d,close:f,focus:l,event:w,onError:p}));!isDefined(g)&&m.default&&(g=m.default({props:n,state:d,close:f,focus:l,event:w,onError:p}));if(isDefined(g)&&("array"===m.type?!Array.isArray(g):typeof g!==m.type))throw new TypeError("Prop is not of type "+m.type+": "+v);n[v]=g}}for(var _=0;_<c.length;_++)delete n[c[_]];eachProp(n,e,function(e,r,t){if(r&&isDefined(t)&&r.decorate){var o=r.decorate({value:t,props:n,state:d,close:f,focus:l,event:w,onError:p});n[e]=o}});for(var b=0,E=Object.keys(e);b<E.length;b++){var P=E[b];if(!1!==e[P].required&&!isDefined(n[P]))throw new Error('Expected prop "'+P+'" to be defined')}}(a,C,e,r,n)};var Te=function(e){ze(e,!0);return y.then(function(){var e=z;var n=A;if(e&&n)return ne(le()).then(function(r){return e.updateProps(r).catch(function(e){return We(n).then(function(n){if(!n)throw e})})})})};return{init:function(){!function(){W.on(j.RENDER,function(){return C.onRender()});W.on(j.DISPLAY,function(){return C.onDisplay()});W.on(j.RENDERED,function(){return C.onRendered()});W.on(j.CLOSE,function(){return C.onClose()});W.on(j.DESTROY,function(){return C.onDestroy()});W.on(j.RESIZE,function(){return C.onResize()});W.on(j.FOCUS,function(){return C.onFocus()});W.on(j.PROPS,function(e){return C.onProps(e)});W.on(j.ERROR,function(e){return C&&C.onError?C.onError(e):ee(e).then(function(){setTimeout(function(){throw e},1)})});b.register(W.reset)}()},render:function(e){var r=e.target,t=e.container,o=e.context,i=e.rerender;return u.try(function(){var e="zoid-"+d+"-"+uniqueID();var s=le();var c=fe();!function(e,n,r){if(e!==window){if(!isSameTopWindow(window,e))throw new Error("Can only renderTo an adjacent frame");var t=getDomain();if(!matchDomain(n,t)&&!isSameDomain(e))throw new Error("Can not render remotely to "+n.toString()+" - can only render to "+t);if(r&&"string"!=typeof r)throw new Error("Container passed to renderTo must be a string selector, got "+typeof r+" }")}}(r,s,t);var l=u.try(function(){if(r!==window)return function(e,n){var r={};for(var t=0,o=Object.keys(C);t<o.length;t++){var i=o[t];var u=a[i];u&&u.allowDelegate&&(r[i]=C[i])}var s=T(n,"zoid_delegate_"+f,{overrides:{props:r,event:W,close:be,onError:xe,getInternalState:re,setInternalState:te,resolveInitPromise:V,rejectInitPromise:ee}}).then(function(e){var r=e.data.parent;b.register(function(e){if(!isWindowClosed(n))return r.destroy(e)});return r.getDelegateOverrides()}).catch(function(e){throw new Error("Unable to delegate rendering. Possibly the component is not loaded in the target window.\n\n"+stringifyError(e))});I=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return s.then(function(e){return e.getProxyContainer.apply(e,n)})};B=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return s.then(function(e){return e.renderContainer.apply(e,n)})};q=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return s.then(function(e){return e.show.apply(e,n)})};L=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return s.then(function(e){return e.hide.apply(e,n)})};K=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return s.then(function(e){return e.watchForUnload.apply(e,n)})};if(e===N.IFRAME){U=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return s.then(function(e){return e.getProxyWindow.apply(e,n)})};H=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return s.then(function(e){return e.openFrame.apply(e,n)})};G=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return s.then(function(e){return e.openPrerenderFrame.apply(e,n)})};J=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return s.then(function(e){return e.prerender.apply(e,n)})};$=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return s.then(function(e){return e.open.apply(e,n)})};Y=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return s.then(function(e){return e.openPrerender.apply(e,n)})}}else e===N.POPUP&&(Z=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return s.then(function(e){return e.setProxyWin.apply(e,n)})});return s}(o,r)});var w=C.window;var p=Pe();var h=serializeProps(a,C,"get").then(function(e){return function(e,n){var r=n.query||{};var t=n.hash||{};var o;var i;var a=e.split("#");i=a[1];var u=(o=a[0]).split("?");o=u[0];var s=extendQuery(u[1],r);var c=extendQuery(i,t);s&&(o=o+"?"+s);c&&(o=o+"#"+c);return o}(normalizeMockUrl(ce()),{query:e})});var v=serializeProps(a,C,"post");var m=W.trigger(j.RENDER);var g=ie(t);var _=oe();var E=_.then(function(n){return function(e){var n=void 0===e?{}:e,r=n.proxyWin,t=n.childDomain,o=n.domain,i=(void 0===n.target&&window,n.context),a=n.uid;return function(e,n,r,t){return ne(r).then(function(o){var i=setup_serializeMessage(e,r,o);var a=n===getDomain()?{type:"uid",uid:t}:{type:"raw",value:i};if("uid"===a.type){var u=lib_global_getGlobal(window);u.props=u.props||{};u.props[t]=i;b.register(function(){delete u.props[t]})}return a})}(r,t,o,a).then(function(e){return{uid:a,context:i,tag:d,version:"9_0_71",childDomain:t,parentDomain:getDomain(window),parent:me(0,t,a,i),props:e,exports:setup_serializeMessage(r,o,(n=r,{init:ge,close:be,checkClose:function(){return We(n)},resize:ye,onError:xe,show:ue,hide:se,export:De}))};var n})}({proxyWin:(t={proxyWin:n,childDomain:c,domain:s,target:r,context:o,uid:e}).proxyWin,childDomain:t.childDomain,domain:t.domain,target:t.target,context:t.context,uid:t.uid}).then(function(e){return"__zoid__"+f+"__"+base64encode(JSON.stringify(e))+"__"});var t});var P=E.then(function(e){return we(o,{windowName:e})});var x=pe(o);var S=u.hash({proxyContainer:g,proxyFrame:P,proxyPrerenderFrame:x}).then(function(n){return Oe(n.proxyContainer,{context:o,uid:e,proxyFrame:n.proxyFrame,proxyPrerenderFrame:n.proxyPrerenderFrame,rerender:i})}).then(function(e){return e});var D=u.hash({windowName:E,proxyFrame:P,proxyWin:_}).then(function(e){var n=e.proxyWin;return w?n:Ee(o,{windowName:e.windowName,proxyWin:n,proxyFrame:e.proxyFrame})});var O=u.hash({proxyWin:D,proxyPrerenderFrame:x}).then(function(e){return he(o,e.proxyWin,e.proxyPrerenderFrame)});var R=D.then(function(e){A=e;return ae(e)});var z=u.hash({proxyPrerenderWin:O,state:R}).then(function(n){return Ae(n.proxyPrerenderWin,{context:o,uid:e})});var M=u.hash({proxyWin:D,windowName:E}).then(function(e){if(w)return e.proxyWin.setName(e.windowName)});var k=u.hash({body:v}).then(function(e){return n.method?n.method:Object.keys(e.body).length?"post":"get"});var Q=u.hash({proxyWin:D,windowUrl:h,body:v,method:k,windowName:M,prerender:z}).then(function(e){return e.proxyWin.setLocation(e.windowUrl,{method:e.method,body:e.body})});var X=D.then(function(e){!function watchForClose(e,n){var r=!1;b.register(function(){r=!0});return u.delay(2e3).then(function(){return e.isClosed()}).then(function(t){if(!r)return t?be(new Error("Detected "+n+" close")):watchForClose(e,n)})}(e,o)});var de=u.hash({container:S,prerender:z}).then(function(){return W.trigger(j.DISPLAY)});var ve=D.then(function(e){return function(e,r,t){return u.try(function(){return e.awaitWindow()}).then(function(e){if(F&&F.needsBridge({win:e,domain:r})&&!F.hasBridge(r,r)){var o="function"==typeof n.bridgeUrl?n.bridgeUrl({props:C}):n.bridgeUrl;if(!o)throw new Error("Bridge needed to render "+t);var i=getDomainFromUrl(o);F.linkUrl(e,r);return F.openBridge(normalizeMockUrl(o),i)}})}(e,c,o)});var _e=Q.then(function(){return u.try(function(){var e=C.timeout;if(e)return y.timeout(e,new Error("Loading component timed out after "+e+" milliseconds"))})});var Se=y.then(function(){return W.trigger(j.RENDERED)});return u.hash({initPromise:y,buildUrlPromise:h,onRenderPromise:m,getProxyContainerPromise:g,openFramePromise:P,openPrerenderFramePromise:x,renderContainerPromise:S,openPromise:D,openPrerenderPromise:O,setStatePromise:R,prerenderPromise:z,loadUrlPromise:Q,buildWindowNamePromise:E,setWindowNamePromise:M,watchForClosePromise:X,onDisplayPromise:de,openBridgePromise:ve,runTimeoutPromise:_e,onRenderedPromise:Se,delegatePromise:l,watchForUnloadPromise:p})}).catch(function(e){return u.all([xe(e),_e(e)]).then(function(){throw e},function(){throw e})}).then(src_util_noop)},destroy:_e,setProps:ze,getHelpers:Re,getDelegateOverrides:function(){return u.try(function(){return{getProxyContainer:ie,show:ue,hide:se,renderContainer:Oe,getProxyWindow:oe,watchForUnload:Pe,openFrame:we,openPrerenderFrame:pe,prerender:Ae,open:Ee,openPrerender:he,setProxyWin:ae}})},getExports:function(){return g({getExports:function(){return Se}})}}}var k={register:function(e,n,r,t){var o=t.React,i=t.ReactDOM;return function(e){_inheritsLoose(_class,e);function _class(){return e.apply(this,arguments)||this}var n=_class.prototype;n.render=function(){return o.createElement("div",null)};n.componentDidMount=function(){var e=i.findDOMNode(this);var n=r(extend({},this.props));n.render(e,N.IFRAME);this.setState({parent:n})};n.componentDidUpdate=function(){this.state&&this.state.parent&&this.state.parent.updateProps(extend({},this.props)).catch(src_util_noop)};return _class}(o.Component)}};var B={register:function(e,n,r,t){return t.component(e,{render:function(e){return e("div")},inheritAttrs:!1,mounted:function(){var e=this.$el;this.parent=r(_extends({},(n=this.$attrs,Object.keys(n).reduce(function(e,r){var t=n[r];r.includes("-")?e[dasherizeToCamel(r)]=t:e[r]=t;return e},{}))));var n;this.parent.render(e,N.IFRAME)},watch:{$attrs:{handler:function(){this.parent&&this.$attrs&&this.parent.updateProps(_extends({},this.$attrs)).catch(src_util_noop)},deep:!0}}})}};var U={register:function(e,n,r,t){return t.module(e,[]).directive(dasherizeToCamel(e),function(){var e={};for(var t=0,o=Object.keys(n);t<o.length;t++)e[o[t]]="=";e.props="=";return{scope:e,restrict:"E",controller:["$scope","$element",function(e,n){function safeApply(){if("$apply"!==e.$root.$$phase&&"$digest"!==e.$root.$$phase)try{e.$apply()}catch(e){}}var t=function(){return replaceObject(e.props,function(e){return"function"==typeof e?function(){var n=e.apply(this,arguments);safeApply();return n}:e})};var o=r(t());o.render(n[0],N.IFRAME);e.$watch(function(){o.updateProps(t()).catch(src_util_noop)})}]}})}};var Z={register:function(e,n,r,t){var o=t.NgModule,i=t.ElementRef,a=t.NgZone;var u=function(e){return replaceObject(_extends({},e.internalProps,e.props),function(n){return"function"==typeof n?function(){var r=arguments,t=this;return e.zone.run(function(){return n.apply(t,r)})}:n})};var s=(0,t.Component)({selector:e,template:"<div></div>",inputs:["props"]}).Class({constructor:[i,a,function(e,n){this._props={};this.elementRef=e;this.zone=n}],ngOnInit:function(){var e=this.elementRef.nativeElement;this.parent=r(u(this));this.parent.render(e,N.IFRAME)},ngDoCheck:function(){if(this.parent&&!function(e,n){var r={};for(var t in e)if(e.hasOwnProperty(t)){r[t]=!0;if(e[t]!==n[t])return!1}for(var o in n)if(!r[o])return!1;return!0}(this._props,this.props)){this._props=_extends({},this.props);this.parent.updateProps(u(this))}}});return o({declarations:[s],exports:[s]}).Class({constructor:function(){}})}};function defaultContainerTemplate(e){var n=e.uid,r=e.frame,t=e.prerenderFrame,o=e.doc,i=e.props,a=e.event,u=e.dimensions,s=u.width,c=u.height;if(r&&t){var d=o.createElement("div");d.setAttribute("id",n);var f=o.createElement("style");i.cspNonce&&f.setAttribute("nonce",i.cspNonce);f.appendChild(o.createTextNode("\n            #"+n+" {\n                display: inline-block;\n                position: relative;\n                width: "+s+";\n                height: "+c+";\n            }\n\n            #"+n+" > iframe {\n                display: inline-block;\n                position: absolute;\n                width: 100%;\n                height: 100%;\n                top: 0;\n                left: 0;\n                transition: opacity .2s ease-in-out;\n            }\n\n            #"+n+" > iframe.zoid-invisible {\n                opacity: 0;\n            }\n\n            #"+n+" > iframe.zoid-visible {\n                opacity: 1;\n        }\n        "));d.appendChild(r);d.appendChild(t);d.appendChild(f);t.classList.add("zoid-visible");r.classList.add("zoid-invisible");a.on(j.RENDERED,function(){t.classList.remove("zoid-visible");t.classList.add("zoid-invisible");r.classList.remove("zoid-invisible");r.classList.add("zoid-visible");setTimeout(function(){destroyElement(t)},1)});a.on(j.RESIZE,function(e){var n=e.width,r=e.height;"number"==typeof n&&(d.style.width=toCSS(n));"number"==typeof r&&(d.style.height=toCSS(r))});return d}}function defaultPrerenderTemplate(e){var n=e.doc,r=e.props;var t=n.createElement("html");var o=n.createElement("body");var i=n.createElement("style");var a=n.createElement("div");a.classList.add("spinner");r.cspNonce&&i.setAttribute("nonce",r.cspNonce);t.appendChild(o);o.appendChild(a);o.appendChild(i);i.appendChild(n.createTextNode("\n            html, body {\n                width: 100%;\n                height: 100%;\n            }\n\n            .spinner {\n                position: fixed;\n                max-height: 60vmin;\n                max-width: 60vmin;\n                height: 40px;\n                width: 40px;\n                top: 50%;\n                left: 50%;\n                box-sizing: border-box;\n                border: 3px solid rgba(0, 0, 0, .2);\n                border-top-color: rgba(33, 128, 192, 0.8);\n                border-radius: 100%;\n                animation: rotation .7s infinite linear;\n            }\n\n            @keyframes rotation {\n                from {\n                    transform: translateX(-50%) translateY(-50%) rotate(0deg);\n                }\n                to {\n                    transform: translateX(-50%) translateY(-50%) rotate(359deg);\n                }\n            }\n        "));return t}var H=cleanup();var G=cleanup();function component_component(e){var n=function(e){var n=e.tag,r=e.url,t=e.domain,o=e.bridgeUrl,i=e.props,a=void 0===i?{}:i,u=e.dimensions,s=void 0===u?{}:u,c=e.autoResize,d=void 0===c?{}:c,f=e.allowedParentDomains,l=void 0===f?"*":f,w=e.attributes,p=void 0===w?{}:w,h=e.defaultContext,v=void 0===h?N.IFRAME:h,m=e.containerTemplate,g=void 0===m?defaultContainerTemplate:m,y=e.prerenderTemplate,_=void 0===y?defaultPrerenderTemplate:y,b=e.validate,E=e.eligible,P=void 0===E?function(){return{eligible:!0}}:E,W=e.logger,x=void 0===W?{info:src_util_noop}:W,S=e.exports,D=void 0===S?src_util_noop:S,C=e.method;var A=n.replace(/-/g,"_");var O=s.width,z=void 0===O?"300px":O,T=s.height,F=void 0===T?"150px":T;var M=_extends({},{window:{type:"object",sendToChild:!1,required:!1,allowDelegate:!0,validate:function(e){var n=e.value;if(!isWindow(n)&&!R.isProxyWindow(n))throw new Error("Expected Window or ProxyWindow");if(isWindow(n)){if(isWindowClosed(n))throw new Error("Window is closed");if(!isSameDomain(n))throw new Error("Window is not same domain")}},decorate:function(e){return setup_toProxyWindow(e.value)}},timeout:{type:"number",required:!1,sendToChild:!1},close:{type:"function",required:!1,sendToChild:!1,childDecorate:function(e){return e.close}},focus:{type:"function",required:!1,sendToChild:!1,childDecorate:function(e){return e.focus}},resize:{type:"function",required:!1,sendToChild:!1,childDecorate:function(e){return e.resize}},uid:{type:"string",required:!1,sendToChild:!1,childDecorate:function(e){return e.uid}},cspNonce:{type:"string",required:!1},getParent:{type:"function",required:!1,sendToChild:!1,childDecorate:function(e){return e.getParent}},getParentDomain:{type:"function",required:!1,sendToChild:!1,childDecorate:function(e){return e.getParentDomain}},show:{type:"function",required:!1,sendToChild:!1,childDecorate:function(e){return e.show}},hide:{type:"function",required:!1,sendToChild:!1,childDecorate:function(e){return e.hide}},export:{type:"function",required:!1,sendToChild:!1,childDecorate:function(e){return e.export}},onDisplay:{type:"function",required:!1,sendToChild:!1,allowDelegate:!0,default:q,decorate:L},onRendered:{type:"function",required:!1,sendToChild:!1,default:q,decorate:L},onRender:{type:"function",required:!1,sendToChild:!1,default:q,decorate:L},onClose:{type:"function",required:!1,sendToChild:!1,allowDelegate:!0,default:q,decorate:L},onDestroy:{type:"function",required:!1,sendToChild:!1,allowDelegate:!0,default:q,decorate:L},onResize:{type:"function",required:!1,sendToChild:!1,allowDelegate:!0,default:q},onFocus:{type:"function",required:!1,sendToChild:!1,allowDelegate:!0,default:q},onError:{type:"function",required:!1,sendToChild:!1,childDecorate:function(e){return e.onError}},onProps:{type:"function",required:!1,sendToChild:!1,default:q,childDecorate:function(e){return e.onProps}}},a);if(!g)throw new Error("Container template required");return{name:A,tag:n,url:r,domain:t,bridgeUrl:o,method:C,propsDef:M,dimensions:{width:z,height:F},autoResize:d,allowedParentDomains:l,attributes:p,defaultContext:v,containerTemplate:g,prerenderTemplate:_,validate:b,logger:x,eligible:P,exports:D}}(e);var r=n.name,t=n.tag,o=n.defaultContext,i=n.propsDef,a=n.eligible;var s=lib_global_getGlobal();var c={};var d=[];var f=function(){var e=getChildPayload();return Boolean(e&&e.tag===t&&e.childDomain===getDomain())};var l=memoize(function(){if(f()){if(window.xprops){delete s.components[t];throw new Error("Can not register "+r+" as child - child already registered")}var e=function(e){var n=e.propsDef,r=e.autoResize,t=e.allowedParentDomains;var o=[];var i=getChildPayload();var a;if(!i)throw new Error("No child payload found");if("9_0_71"!==i.version)throw new Error("Parent window has zoid version "+i.version+", child window has version 9_0_71");var s=i.uid,c=i.parentDomain,d=i.exports,f=i.context,l=i.props;var w=function(e){var n=e.type;if("opener"===n)return assertExists("opener",getOpener(window));if("parent"===n&&"number"==typeof e.distance)return assertExists("parent",function(e,n){void 0===n&&(n=1);return function(e,n){void 0===n&&(n=1);var r=e;for(var t=0;t<n;t++){if(!r)return;r=utils_getParent(r)}return r}(e,getDistanceFromTop(e)-n)}(window,e.distance));if("global"===n&&e.uid&&"string"==typeof e.uid){var r=e.uid;var t=getAncestor(window);if(!t)throw new Error("Can not find ancestor window");for(var o=0,i=getAllFramesInWindow(t);o<i.length;o++){var a=i[o];if(isSameDomain(a)){var u=lib_global_getGlobal(a);if(u&&u.windows&&u.windows[r])return u.windows[r]}}}throw new Error("Unable to find "+n+" parent component window")}(i.parent);var p=setup_deserializeMessage(w,c,d);var h=p.show,v=p.hide,m=p.close;var g=function(){return w};var y=function(){return c};var _=function(e){o.push(e)};var b=function(e){return u.try(function(){if(p&&p.onError)return p.onError(e);throw e})};var E=function(e){return p.resize.fireAndForget({width:e.width,height:e.height})};var P=function(e){return p.export(e)};var W=function(e,r,t){void 0===t&&(t=!1);var i=function(e,n,r,t,o,i){void 0===i&&(i=!1);var a={};for(var u=0,s=Object.keys(r);u<s.length;u++){var c=s[u];var d=n[c];if(!d||!d.sameDomain||t===getDomain(window)&&isSameDomain(e)){var f=normalizeChildProp(n,0,c,r[c],o);a[c]=f;d&&d.alias&&!a[d.alias]&&(a[d.alias]=f)}}if(!i)for(var l=0,w=Object.keys(n);l<w.length;l++){var p=w[l];r.hasOwnProperty(p)||(a[p]=normalizeChildProp(n,0,p,void 0,o))}return a}(w,n,e,r,{show:h,hide:v,close:m,focus:child_focus,onError:b,resize:E,onProps:_,getParent:g,getParentDomain:y,uid:s,export:P},t);a?extend(a,i):a=i;for(var u=0;u<o.length;u++)(0,o[u])(a)};var x=function(e){return u.try(function(){return W(e,c,!0)})};return{init:function(){return u.try(function(){!function(e,n){if(!matchDomain(e,n))throw new Error("Can not be rendered by domain: "+n)}(t,c);markWindowKnown(w);!function(){window.addEventListener("beforeunload",function(){p.checkClose.fireAndForget()});window.addEventListener("unload",function(){p.checkClose.fireAndForget()});onCloseWindow(w,function(){child_destroy()})}();return p.init({updateProps:x,close:child_destroy})}).then(function(){return(e=r.width,n=void 0!==e&&e,t=r.height,o=void 0!==t&&t,i=r.element,elementReady(void 0===i?"body":i).catch(src_util_noop).then(function(e){return{width:n,height:o,element:e}})).then(function(e){var n=e.width,r=e.height,t=e.element;t&&(n||r)&&f!==N.POPUP&&onResize(t,function(e){E({width:n?e.width:void 0,height:r?e.height:void 0})},{width:n,height:r})});var e,n,t,o,i}).catch(function(e){b(e)})},getProps:function(){if(a)return a;W(function(e,n,r){var t=r.type,o=r.uid;var i;if("raw"===t)i=r.value;else if("uid"===t){if(!isSameDomain(e))throw new Error("Parent component window is on a different domain - expected "+getDomain()+" - can not retrieve props");var a=lib_global_getGlobal(e);i=assertExists("props",a&&a.props[o])}if(!i)throw new Error("Could not find props");return setup_deserializeMessage(e,n,i)}(w,c,l),c);return a}}}(n);e.init();return e}});var w=function init(e){var t;var i=e||{};var s=a({props:i}),c=s.eligible,f=s.reason;var l=i.onDestroy;i.onDestroy=function(){t&&c&&d.splice(d.indexOf(t),1);if(l)return l.apply(void 0,arguments)};var w=parentComponent({options:n});w.init();c?w.setProps(i):i.onDestroy&&i.onDestroy();H.register(function(e){w.destroy(e||new Error("zoid destroyed all components"))});var p=function(e){var n=(void 0===e?{}:e).decorate;return init((void 0===n?identity:n)(i))};var h=function(e,n,a){return u.try(function(){if(!c){var t=new Error(f||r+" component is not eligible");return w.destroy(t).then(function(){throw t})}if(!isWindow(e))throw new Error("Must pass window to renderTo");if(e!==window&&"string"!=typeof n)throw new Error("Must pass string element when rendering to another window");return function(e,n){return u.try(function(){if(e.window)return setup_toProxyWindow(e.window).getType();if(n){if(n!==N.IFRAME&&n!==N.POPUP)throw new Error("Unrecognized context: "+n);return n}return o})}(i,a)}).then(function(r){n=function(e,n){if(n){if("string"!=typeof n&&!isElement(n))throw new TypeError("Expected string or element selector to be passed");return n}if(e===N.POPUP)return"body";throw new Error("Expected element to be passed to render iframe")}(r,n);return w.render({target:e,container:n,context:r,rerender:function(){var r=p();extend(t,r);return r.renderTo(e,n,a)}})}).catch(function(e){return w.destroy(e).then(function(){throw e})})};t=_extends({},w.getExports(),w.getHelpers(),{isEligible:function(){return c},clone:p,render:function(e,n){return h(window,e,n)},renderTo:function(e,n,r){return h(e,n,r)}});c&&d.push(t);return t};l();!function(){var e=on_on("zoid_allow_delegate_"+r,function(){return!0});var t=on_on("zoid_delegate_"+r,function(e){return{parent:parentComponent({options:n,overrides:e.data.overrides,parentWin:e.source})}});G.register(e.cancel);G.register(t.cancel)}();s.components=s.components||{};if(s.components[t])throw new Error("Can not register multiple components with the same tag: "+t);s.components[t]=!0;return{init:w,instances:d,driver:function(e,n){var r={react:k,angular:U,vue:B,angular2:Z};if(!r[e])throw new Error("Could not find driver for framework: "+e);c[e]||(c[e]=r[e].register(t,i,w,n));return c[e]},isChild:f,canRenderTo:function(e){return T(e,"zoid_allow_delegate_"+r).then(function(e){return e.data}).catch(function(){return!1})},registerChild:l}}function create(e){!function(){if(!global_getGlobal().initialized){global_getGlobal().initialized=!0;n=(e={on:on_on,send:T}).on,r=e.send,(t=global_getGlobal()).receiveMessage=t.receiveMessage||function(e){return receive_receiveMessage(e,{on:n,send:r})};!function(e){var n=e.on,r=e.send;globalStore().getOrSet("postMessageListener",function(){return addEventListener(window,"message",function(e){!function(e,n){var r=n.on,t=n.send;u.try(function(){var n=e.source||e.sourceElement;var o=e.origin||e.originalEvent&&e.originalEvent.origin;var i=e.data;"null"===o&&(o="file://");if(n){if(!o)throw new Error("Post message did not have origin domain");receive_receiveMessage({source:n,origin:o,data:i},{on:r,send:t})}})}(e,{on:n,send:r})})})}({on:on_on,send:T});setupBridge({on:on_on,send:T,receiveMessage:receive_receiveMessage});!function(e){var n=e.on,r=e.send;globalStore("builtinListeners").getOrSet("helloListener",function(){var e=n("postrobot_hello",{domain:"*"},function(e){resolveHelloPromise(e.source,{domain:e.origin});return{instanceID:getInstanceID()}});var t=getAncestor();t&&sayHello(t,{send:r}).catch(function(e){});return e})}({on:on_on,send:T})}var e,n,r,t}();var n=component_component(e);var r=function(e){return n.init(e)};r.driver=function(e,r){return n.driver(e,r)};r.isChild=function(){return n.isChild()};r.canRenderTo=function(e){return n.canRenderTo(e)};r.instances=n.instances;var t=n.registerChild();t&&(window.xprops=r.xprops=t.getProps());return r}function destroyComponents(e){F&&F.destroyBridges();var n=H.all(e);H=cleanup();return n}var J=destroyComponents;function component_destroy(e){J();delete window.__zoid_9_0_71__;!function(){!function(){var e=globalStore("responseListeners");for(var n=0,r=e.keys();n<r.length;n++){var t=r[n];var o=e.get(t);o&&(o.cancelled=!0);e.del(t)}}();(e=globalStore().get("postMessageListener"))&&e.cancel();var e;delete window.__post_robot_10_0_44__}();return G.all(e)}}])})}};var n={};function __nccwpck_require__(r){if(n[r]){return n[r].exports}var t=n[r]={exports:{}};var o=true;try{e[r].call(t.exports,t,t.exports,__nccwpck_require__);o=false}finally{if(o)delete n[r]}return t.exports}__nccwpck_require__.ab=__dirname+"/";return __nccwpck_require__(912)})();